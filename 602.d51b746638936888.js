"use strict";(self.webpackChunkEVC_UI_Web_Admin=self.webpackChunkEVC_UI_Web_Admin||[]).push([[602],{1720:(ie,M,a)=>{a.d(M,{z:()=>f});var c=a(3458),_=a(7587),F=a(520);let f=(()=>{class p extends c.f{constructor(d){super(d),this._apiPrefix="organizations"}getAllOrganizations(d){const g=`${this._apiPrefix}${this.getObjectQueryParams(Object.assign(Object.assign({},null==d?void 0:d.filters),null==d?void 0:d.includes))}`;return this.get(g)}getOrganization(d,g){const v=`${this._apiPrefix}/${d}${this.getObjectQueryParams(g)}`;return this.get(v)}addOrganization(d){return this.post(this._apiPrefix,d)}updateOrganization(d,g){return this.put(`${this._apiPrefix}/${d}`,g)}deleteOrganization(d){return this.delete(`${this._apiPrefix}/${d}`)}}return p.\u0275fac=function(d){return new(d||p)(_.LFG(F.eN))},p.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},3602:(ie,M,a)=>{a.r(M),a.d(M,{UsersModule:()=>Wt});var c=a(9808),_=a(2382),F=a(6198),f=a(5861),p=a(9783),e=a(7587),d=a(7093),g=a(5315),v=a(3678),N=a(8655),y=a(3724),x=a(845),O=a(7766);function ne(n,o){if(1&n&&e._UZ(0,"p-message",9),2&n){const t=e.oxw(2);e.Q6J("text",t.error)}}function le(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-form",3),e.NdJ("onSubmit",function(l){return e.CHM(t),e.oxw().onSubmit(l)}),e.TgZ(1,"app-input",4),e.NdJ("valueChange",function(l){return e.CHM(t),e.oxw().request.newPassword=l}),e.qZA(),e.YNc(2,ne,1,1,"p-message",5),e.TgZ(3,"div",6)(4,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().visible=!1}),e.qZA(),e._UZ(5,"button",8),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.isSubmitting),e.xp6(1),e.Q6J("value",t.request.newPassword),e.xp6(1),e.Q6J("ngIf",t.error)}}let P=(()=>{class n{constructor(t){this._authService=t,this._isSubmitting=!1}onSubmit(t){var i=this;return(0,f.Z)(function*(){if(t.isValid)try{i._isSubmitting=!0,i._error=null,yield i._authService.adminResetPassword(i.request),i.visible=!1}catch(l){i._error=l.error}finally{i._isSubmitting=!1}})()}get visible(){return this._visible}set visible(t){this._visible=t,this._visible&&(this._error=null)}get isSubmitting(){return this._isSubmitting}get error(){return this._error}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pass-reset-modal"]],inputs:{request:"request",visible:"visible"},decls:3,vars:4,consts:[["styleClass","lg:w-4 lg:h-auto w-11 h-full","header","Reset User Password",3,"modal","visible","visibleChange"],[3,"disabled","onSubmit",4,"ngIf"],["text","Resetting...",3,"visible"],[3,"disabled","onSubmit"],["name","password","type","password","placeholder","Leave blank to generate random password","label","Password","labelClass","mb-2",1,"w-full","p-1","mb-4",3,"value","valueChange"],["severity","error","styleClass","w-full mb-4",3,"text",4,"ngIf"],["slot","footer",1,"form-actions","text-right"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","type","submit","label","Submit","icon","pi pi-check",1,"p-button-text"],["severity","error","styleClass","w-full mb-4",3,"text"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(s){return i.visible=s}),e.YNc(1,le,6,3,"app-form",1),e._UZ(2,"app-fullscreen-loader",2),e.qZA()),2&t&&(e.Q6J("modal",!0)("visible",i.visible),e.xp6(1),e.Q6J("ngIf",i.request),e.xp6(1),e.Q6J("visible",i.isSubmitting))},directives:[g.V,c.O5,v.i,N.a,y.q,x.Hq,O.l],styles:["[_nghost-%COMP%]   app-form[_ngcontent-%COMP%]{height:100%}"]}),n})();var V=a(3458),E=a(520);let H=(()=>{class n extends V.f{constructor(t){super(t),this._apiPrefix="users"}getAllUsers(t){const i=`${this._apiPrefix}${this.getObjectQueryParams(Object.assign(Object.assign({},null==t?void 0:t.filters),null==t?void 0:t.includes))}`;return this.get(i)}getUser(t,i){const l=`${this._apiPrefix}/${t}${this.getObjectQueryParams(i)}`;return this.get(l)}addUser(t){return this.post(this._apiPrefix,t)}updateUser(t,i){return this.put(`${this._apiPrefix}/${t}`,i)}deleteUser(t){return this.delete(`${this._apiPrefix}/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(E.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var D=a(6175),T=a(1208);function oe(n,o){1&n&&e.GkF(0)}function se(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"p-dialog",3),e.NdJ("visibleChange",function(l){return e.CHM(t),e.oxw().modalVisible=l}),e.YNc(1,oe,1,0,"ng-container",4),e.qZA()}if(2&n){const t=e.oxw(),i=e.MAs(3);e.Q6J("header","add"===t.type?"Add User":"Edit User")("modal",!0)("closable",!t.isSubmitting)("visible",t.modalVisible),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function re(n,o){1&n&&e.GkF(0)}function ae(n,o){if(1&n&&(e.ynx(0),e.YNc(1,re,1,0,"ng-container",4),e.BQk()),2&n){e.oxw();const t=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function ce(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-input",21),e.NdJ("valueChange",function(l){return e.CHM(t),e.oxw(3).data.password=l}),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("value",t.data.password)}}function pe(n,o){if(1&n&&e._UZ(0,"p-message",22),2&n){const t=e.oxw(3);e.Q6J("text",t.error)}}function ue(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).modalVisible=!1}),e.qZA()}}const A=function(){return{required:!0}};function de(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-form",7),e.NdJ("onSubmit",function(l){return e.CHM(t),e.oxw(2).onSubmit(l)}),e.TgZ(1,"app-form-group",8)(2,"app-input",9),e.NdJ("valueChange",function(l){return e.CHM(t),e.oxw(2).data.email=l}),e.qZA(),e.YNc(3,ce,1,1,"app-input",10),e.qZA(),e.TgZ(4,"app-form-group",8)(5,"app-input",11),e.NdJ("valueChange",function(l){return e.CHM(t),e.oxw(2).data.lastName=l}),e.qZA(),e.TgZ(6,"app-input",12),e.NdJ("valueChange",function(l){return e.CHM(t),e.oxw(2).data.firstName=l}),e.qZA()(),e.TgZ(7,"div",13)(8,"div",14)(9,"label",15)(10,"p-checkbox",16),e.NdJ("ngModelChange",function(l){return e.CHM(t),e.oxw(2).data.isEmailVerified=l}),e.qZA(),e.TgZ(11,"span"),e._uU(12,"Email verified"),e.qZA()()()(),e.YNc(13,pe,1,1,"p-message",17),e.TgZ(14,"div",18),e.YNc(15,ue,1,0,"button",19),e._UZ(16,"button",20),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.isSubmitting),e.xp6(2),e.Q6J("validations",e.DdM(12,A))("value",t.data.email),e.xp6(1),e.Q6J("ngIf","add"===t.type),e.xp6(2),e.Q6J("validations",e.DdM(13,A))("value",t.data.lastName),e.xp6(1),e.Q6J("validations",e.DdM(14,A))("value",t.data.firstName),e.xp6(4),e.Q6J("binary",!0)("ngModel",t.data.isEmailVerified),e.xp6(3),e.Q6J("ngIf",t.error),e.xp6(2),e.Q6J("ngIf",t.modal)}}function _e(n,o){if(1&n&&(e.YNc(0,de,17,15,"app-form",5),e._UZ(1,"app-fullscreen-loader",6)),2&n){const t=e.oxw();e.Q6J("ngIf",t.data),e.xp6(1),e.Q6J("visible",t.isSubmitting)}}let U=(()=>{class n{constructor(t){this._usersService=t,this.onSubmitSuccess=new e.vpe,this.modal=!1,this.modalVisible=!1,this._isSubmitting=!1}clear(){var t;null===(t=this._form)||void 0===t||t.clearInputs(),this._error=null}onSubmit(t){var i=this;return(0,f.Z)(function*(){if(t.isValid)try{i._isSubmitting=!0,i._error=null;const l=yield i.sendSubmission(i.type,i.data);i.onSubmitSuccess.emit(l)}catch(l){i.showHttpError(l)}finally{i._isSubmitting=!1}})()}sendSubmission(t,i){var l=this;return new Promise(function(){var s=(0,f.Z)(function*(r,u){try{let m=null;switch(t){case"add":m=yield l._usersService.addUser(i);break;case"edit":m=yield l._usersService.updateUser(i.id,i);break;default:throw"[FormType] property is invalid"}r(m.body)}catch(m){u(m.error)}});return function(r,u){return s.apply(this,arguments)}}())}showHttpError(t){this._error="string"==typeof t.error?t.error:t.message}get isSubmitting(){return this._isSubmitting}get error(){return this._error}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(H))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-form"]],viewQuery:function(t,i){if(1&t&&e.Gf(v.i,5),2&t){let l;e.iGM(l=e.CRH())&&(i._form=l.first)}},inputs:{type:"type",data:"data",modal:"modal",modalVisible:"modalVisible"},outputs:{onSubmitSuccess:"onSubmitSuccess"},decls:4,vars:2,consts:[["styleClass","lg:w-6 lg:h-auto w-11 h-full",3,"header","modal","closable","visible","visibleChange",4,"ngIf"],[4,"ngIf"],["formTemplate",""],["styleClass","lg:w-6 lg:h-auto w-11 h-full",3,"header","modal","closable","visible","visibleChange"],[4,"ngTemplateOutlet"],[3,"disabled","onSubmit",4,"ngIf"],["text","Submitting...",3,"visible"],[3,"disabled","onSubmit"],["contentClass","grid mb-2"],["name","email","type","email","label","Email","labelClass","mb-2",1,"col",3,"validations","value","valueChange"],["class","col","name","password","type","password","placeholder","Leave blank to generate random password","label","Password","labelClass","mb-2",3,"value","valueChange",4,"ngIf"],["name","last-name","label","Last Name","labelClass","mb-2",1,"col",3,"validations","value","valueChange"],["name","first-name","label","First Name","labelClass","mb-2",1,"col",3,"validations","value","valueChange"],[1,"grid","mb-2"],[1,"col"],[1,"cursor-pointer"],["name","email-verified",1,"mr-2",3,"binary","ngModel","ngModelChange"],["severity","error","styleClass","block mt-4 mb-2",3,"text",4,"ngIf"],["slot","footer",1,"form-actions","text-right"],["pButton","","class","p-button-text","type","button","label","Cancel","icon","pi pi-times",3,"click",4,"ngIf"],["pButton","","type","submit","label","Submit","icon","pi pi-check",1,"p-button-text"],["name","password","type","password","placeholder","Leave blank to generate random password","label","Password","labelClass","mb-2",1,"col",3,"value","valueChange"],["severity","error","styleClass","block mt-4 mb-2",3,"text"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,se,2,5,"p-dialog",0),e.YNc(1,ae,2,1,"ng-container",1),e.YNc(2,_e,2,2,"ng-template",null,2,e.W1O)),2&t&&(e.Q6J("ngIf",i.modal),e.xp6(1),e.Q6J("ngIf",!i.modal))},directives:[c.O5,g.V,c.tP,v.i,D.H,N.a,T.XZ,_.JJ,_.On,y.q,x.Hq,O.l],styles:["[_nghost-%COMP%]   app-form[_ngcontent-%COMP%]{height:100%}"]}),n})(),Y=(()=>{class n extends V.f{constructor(t){super(t),this._apiPrefix="user-profiles"}getAllProfiles(t){const i=`${this._apiPrefix}${this.getObjectQueryParams(Object.assign(Object.assign({},null==t?void 0:t.filters),null==t?void 0:t.includes))}`;return this.get(i)}getProfile(t,i){const l=`${this._apiPrefix}/${t}${this.getObjectQueryParams(i)}`;return this.get(l)}addProfile(t){return this.post(this._apiPrefix,t)}updateProfile(t,i){return this.put(`${this._apiPrefix}/${t}`,i)}deleteProfile(t){return this.delete(`${this._apiPrefix}/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(E.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var B=a(4063),k=a(4036),C=a(1777),h=a(5730),b=a(5921),S=a(9797),R=a(4119),J=a(5787);function me(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.label)}}function fe(n,o){1&n&&e.GkF(0)}const q=function(n){return{height:n}},ge=function(n,o){return{"p-highlight":n,"p-disabled":o}},he=function(n){return{"p-highlight":n}},z=function(n){return{"pi pi-check":n}},w=function(n){return{$implicit:n}},be=["container"],ve=["filterInput"],xe=["in"];function Ce(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.valuesAsString||"empty")}}function ye(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",17),e.NdJ("click",function(l){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(3).removeChip(s,l)}),e.qZA()}}function Te(n,o){if(1&n&&(e.TgZ(0,"div",13,14)(2,"span",15),e._uU(3),e.qZA(),e.YNc(4,ye,1,0,"span",16),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(3),e.Oqu(i.findLabelByValue(t)),e.xp6(1),e.Q6J("ngIf",!i.disabled)}}function Se(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.placeholder||t.defaultLabel||"empty")}}function we(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Te,5,2,"div",12),e.YNc(2,Se,2,1,"ng-container",7),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.value),e.xp6(1),e.Q6J("ngIf",!t.value||0===t.value.length)}}function Me(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Ce,2,1,"ng-container",7),e.YNc(2,we,3,2,"ng-container",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","comma"===t.display),e.xp6(1),e.Q6J("ngIf","chip"===t.display)}}function Fe(n,o){1&n&&e.GkF(0)}function Oe(n,o){1&n&&e.GkF(0)}const ke=function(n){return{"p-checkbox-disabled":n}},Ie=function(n,o,t){return{"p-highlight":n,"p-focus":o,"p-disabled":t}};function Ze(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",2)(2,"input",31),e.NdJ("focus",function(){return e.CHM(t),e.oxw(3).onHeaderCheckboxFocus()})("blur",function(){return e.CHM(t),e.oxw(3).onHeaderCheckboxBlur()})("keydown.space",function(l){return e.CHM(t),e.oxw(3).toggleAll(l)}),e.qZA()(),e.TgZ(3,"div",32),e.NdJ("click",function(l){return e.CHM(t),e.oxw(3).toggleAll(l)}),e._UZ(4,"span",33),e.qZA()()}if(2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(6,ke,t.disabled||t.toggleAllDisabled)),e.xp6(2),e.Q6J("checked",t.allChecked)("disabled",t.disabled||t.toggleAllDisabled),e.xp6(1),e.Q6J("ngClass",e.kEZ(8,Ie,t.allChecked,t.headerCheckboxFocus,t.disabled||t.toggleAllDisabled)),e.uIk("aria-checked",t.allChecked),e.xp6(1),e.Q6J("ngClass",e.VKq(12,z,t.allChecked))}}function Pe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",34)(1,"input",35,36),e.NdJ("input",function(l){return e.CHM(t),e.oxw(3).onFilterInputChange(l)}),e.qZA(),e._UZ(3,"span",37),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("value",t.filterValue||"")("disabled",t.disabled),e.uIk("autocomplete",t.autocomplete)("placeholder",t.filterPlaceHolder)("aria-label",t.ariaFilterLabel)}}function Ae(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",24),e.Hsn(1),e.YNc(2,Oe,1,0,"ng-container",25),e.YNc(3,Ze,5,14,"div",26),e.YNc(4,Pe,4,5,"div",27),e.TgZ(5,"button",28),e.NdJ("click",function(l){return e.CHM(t),e.oxw(2).close(l)}),e._UZ(6,"span",29),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",t.headerTemplate),e.xp6(1),e.Q6J("ngIf",t.showToggleAll&&!t.selectionLimit),e.xp6(1),e.Q6J("ngIf",t.filter)}}function Ue(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.Oqu(i.getOptionGroupLabel(t)||"empty")}}function Je(n,o){1&n&&e.GkF(0)}function Le(n,o){1&n&&e.GkF(0)}function Qe(n,o){if(1&n&&(e.TgZ(0,"li",39),e.YNc(1,Ue,2,1,"span",7),e.YNc(2,Je,1,0,"ng-container",8),e.qZA(),e.YNc(3,Le,1,0,"ng-container",8)),2&n){const t=o.$implicit;e.oxw(2);const i=e.MAs(7),l=e.oxw();e.xp6(1),e.Q6J("ngIf",!l.groupTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",l.groupTemplate)("ngTemplateOutletContext",e.VKq(5,w,t)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(7,w,l.getOptionGroupChildren(t)))}}function Ne(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Qe,4,9,"ng-template",38),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.optionsToRender)}}function Ve(n,o){1&n&&e.GkF(0)}function Ee(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Ve,1,0,"ng-container",8),e.BQk()),2&n){e.oxw();const t=e.MAs(7),i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,w,i.optionsToRender))}}function He(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"p-multiSelectItem",43),e.NdJ("onClick",function(l){return e.CHM(t),e.oxw(4).onOptionClick(l)})("onKeydown",function(l){return e.CHM(t),e.oxw(4).onOptionKeydown(l)}),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(4);e.Q6J("option",t)("selected",i.isSelected(t))("label",i.getOptionLabel(t))("disabled",i.isOptionDisabled(t))("template",i.itemTemplate)}}function De(n,o){if(1&n&&(e.ynx(0),e.YNc(1,He,1,5,"ng-template",38),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Ye(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"p-multiSelectItem",48),e.NdJ("onClick",function(l){return e.CHM(t),e.oxw(5).onOptionClick(l)})("onKeydown",function(l){return e.CHM(t),e.oxw(5).onOptionKeydown(l)}),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(5);e.xp6(1),e.Q6J("option",t)("selected",i.isSelected(t))("label",i.getOptionLabel(t))("disabled",i.isOptionDisabled(t))("template",i.itemTemplate)("itemSize",i.itemSize)}}function Be(n,o){if(1&n&&(e.TgZ(0,"cdk-virtual-scroll-viewport",45,46),e.YNc(2,Ye,2,6,"ng-container",47),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(3,q,i.scrollHeight))("itemSize",i.itemSize),e.xp6(2),e.Q6J("cdkVirtualForOf",t)}}function Re(n,o){if(1&n&&e.YNc(0,Be,3,5,"cdk-virtual-scroll-viewport",44),2&n){const t=e.oxw(3);e.Q6J("ngIf",t.virtualScroll&&!t.emptyOptions)}}function qe(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.emptyFilterMessageLabel," ")}}function ze(n,o){1&n&&e.GkF(0,null,50)}function Ge(n,o){if(1&n&&(e.TgZ(0,"li",49),e.YNc(1,qe,2,1,"ng-container",40),e.YNc(2,ze,2,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.emptyFilterTemplate&&!t.emptyTemplate)("ngIfElse",t.emptyFilter),e.xp6(1),e.Q6J("ngTemplateOutlet",t.emptyFilterTemplate||t.emptyTemplate)}}function $e(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.emptyMessageLabel," ")}}function Ke(n,o){1&n&&e.GkF(0,null,51)}function je(n,o){if(1&n&&(e.TgZ(0,"li",49),e.YNc(1,$e,2,1,"ng-container",40),e.YNc(2,Ke,2,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.emptyTemplate)("ngIfElse",t.empty),e.xp6(1),e.Q6J("ngTemplateOutlet",t.emptyTemplate)}}function We(n,o){if(1&n&&(e.YNc(0,De,2,1,"ng-container",40),e.YNc(1,Re,1,1,"ng-template",null,41,e.W1O),e.YNc(3,Ge,3,3,"li",42),e.YNc(4,je,3,3,"li",42)),2&n){const t=e.MAs(2),i=e.oxw(2);e.Q6J("ngIf",!i.virtualScroll)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.hasFilter()&&i.emptyOptions),e.xp6(1),e.Q6J("ngIf",!i.hasFilter()&&i.emptyOptions)}}function Xe(n,o){1&n&&e.GkF(0)}function et(n,o){if(1&n&&(e.TgZ(0,"div",52),e.Hsn(1,1),e.YNc(2,Xe,1,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",t.footerTemplate)}}const tt=function(){return["p-multiselect-panel p-component"]},it=function(n,o){return{showTransitionParams:n,hideTransitionParams:o}},nt=function(n){return{value:"visible",params:n}},lt=function(n){return{"p-multiselect-virtualscroll":n}};function ot(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("@overlayAnimation.start",function(l){return e.CHM(t),e.oxw().onOverlayAnimationStart(l)})("@overlayAnimation.done",function(l){return e.CHM(t),e.oxw().onOverlayAnimationEnd(l)})("keydown",function(l){return e.CHM(t),e.oxw().onKeydown(l)})("click",function(l){return e.CHM(t),e.oxw().onOverlayClick(l)}),e.YNc(1,Ae,7,3,"div",19),e.TgZ(2,"div",20)(3,"ul",21),e.YNc(4,Ne,2,1,"ng-container",7),e.YNc(5,Ee,2,4,"ng-container",7),e.YNc(6,We,5,4,"ng-template",null,22,e.W1O),e.qZA()(),e.YNc(8,et,3,1,"div",23),e.qZA()}if(2&n){const t=e.oxw();e.Tol(t.panelStyleClass),e.Q6J("ngClass",e.DdM(12,tt))("@overlayAnimation",e.VKq(16,nt,e.WLB(13,it,t.showTransitionOptions,t.hideTransitionOptions)))("ngStyle",t.panelStyle),e.xp6(1),e.Q6J("ngIf",t.showHeader),e.xp6(1),e.Udp("max-height",t.virtualScroll?"auto":t.scrollHeight||"auto"),e.xp6(1),e.Q6J("ngClass",e.VKq(18,lt,t.virtualScroll)),e.xp6(1),e.Q6J("ngIf",t.group),e.xp6(1),e.Q6J("ngIf",!t.group),e.xp6(3),e.Q6J("ngIf",t.footerFacet||t.footerTemplate)}}const st=[[["p-header"]],[["p-footer"]]],rt=function(n,o,t,i){return{"p-multiselect p-component":!0,"p-multiselect-open":n,"p-multiselect-chip":o,"p-focus":t,"p-disabled":i}},at=function(n,o){return{"p-placeholder":n,"p-multiselect-label-empty":o}},ct=function(){return{"p-multiselect-trigger":!0}},pt=["p-header","p-footer"],ut={provide:_.JU,useExisting:(0,e.Gpc)(()=>G),multi:!0};let dt=(()=>{class n{constructor(){this.onClick=new e.vpe,this.onKeydown=new e.vpe}onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option})}onOptionKeydown(t){this.onKeydown.emit({originalEvent:t,option:this.option})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&(e.TgZ(0,"li",0),e.NdJ("click",function(s){return i.onOptionClick(s)})("keydown",function(s){return i.onOptionKeydown(s)}),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"span",3),e.qZA()(),e.YNc(4,me,2,1,"span",4),e.YNc(5,fe,1,0,"ng-container",5),e.qZA()),2&t&&(e.Q6J("ngStyle",e.VKq(9,q,i.itemSize+"px"))("ngClass",e.WLB(11,ge,i.selected,i.disabled)),e.uIk("aria-label",i.label)("tabindex",i.disabled?null:"0"),e.xp6(2),e.Q6J("ngClass",e.VKq(14,he,i.selected)),e.xp6(1),e.Q6J("ngClass",e.VKq(16,z,i.selected)),e.xp6(1),e.Q6J("ngIf",!i.template),e.xp6(1),e.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",e.VKq(18,w,i.option)))},directives:[J.H,c.PC,c.mk,c.O5,c.tP],encapsulation:2}),n})(),G=(()=>{class n{constructor(t,i,l,s,r,u){this.el=t,this.renderer=i,this.cd=l,this.filterService=s,this.config=r,this.overlayService=u,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.onChange=new e.vpe,this.onFilter=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.onClick=new e.vpe,this.onPanelShow=new e.vpe,this.onPanelHide=new e.vpe,this.scrollHeight="200px",this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(t){this._defaultLabel=t,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(t){this._placeholder=t,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(t){this._options=t,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(t){this._filterValue=t,this.activateFilter()}ngOnInit(){this.updateLabel()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"selectedItems":this.selectedItemsTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(t){return this.optionLabel?b.gb.resolveFieldData(t,this.optionLabel):null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?b.gb.resolveFieldData(t,this.optionValue):this.optionLabel||void 0===t.value?t:t.value}getOptionGroupLabel(t){return this.optionGroupLabel?b.gb.resolveFieldData(t,this.optionGroupLabel):null!=t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?b.gb.resolveFieldData(t,this.optionGroupChildren):t.items}isOptionDisabled(t){return(this.optionDisabled?b.gb.resolveFieldData(t,this.optionDisabled):void 0!==t.disabled&&t.disabled)||this.maxSelectionLimitReached&&!this.isSelected(t)}writeValue(t){this.value=t,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOptionClick(t){let i=t.option;if(this.isOptionDisabled(i))return;let l=this.getOptionValue(i),s=this.findSelectionIndex(l);-1!=s?(this.value=this.value.filter((r,u)=>u!=s),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],l]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:t.originalEvent,value:this.value,itemValue:l}),this.updateLabel(),this.updateFilledState()}isSelected(t){return-1!=this.findSelectionIndex(this.getOptionValue(t))}findSelectionIndex(t){let i=-1;if(this.value)for(let l=0;l<this.value.length;l++)if(b.gb.equals(this.value[l],t,this.dataKey)){i=l;break}return i}get toggleAllDisabled(){let t=this.optionsToRender;if(!t||0===t.length)return!0;for(let i of t)if(!this.isOptionDisabled(i))return!1;return!0}toggleAll(t){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.updateFilledState(),this.updateLabel(),t.preventDefault())}checkAll(){let i=[];this.optionsToRender.forEach(l=>{if(this.group){let s=this.getOptionGroupChildren(l);s&&s.forEach(r=>{let u=this.isOptionDisabled(r);(!u||u&&this.isSelected(r))&&i.push(this.getOptionValue(r))})}else{let s=this.isOptionDisabled(l);(!s||s&&this.isSelected(l))&&i.push(this.getOptionValue(l))}}),this.value=i}uncheckAll(){let i=[];this.optionsToRender.forEach(l=>{this.group?l.items&&l.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&i.push(this.getOptionValue(s))}):this.isOptionDisabled(l)&&this.isSelected(l)&&i.push(this.getOptionValue(l))}),this.value=i}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}onOverlayAnimationStart(t){switch(t.toState){case"visible":this.overlay=t.element,this.appendOverlay(),this.autoZIndex&&b.P9.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(t){"void"===t.toState&&b.P9.clear(t.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):h.p.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=h.p.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?h.p.absolutePosition(this.overlay,this.containerViewChild.nativeElement):h.p.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&(this.filterInputChild.nativeElement.value="",this._filterValue=null,this._filteredOptions=null),this.onPanelHide.emit(),this.cd.markForCheck()}close(t){this.hide(),t.preventDefault(),t.stopPropagation()}onMouseclick(t,i){this.disabled||this.readonly||t.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(t),!this.isOverlayClick(t)&&!h.p.hasClass(t.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(i.focus(),this.show())))}removeChip(t,i){this.value=this.value.filter(l=>!b.gb.equals(l,t,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:i,value:this.value,itemValue:t}),this.updateLabel(),this.updateFilledState()}isOverlayClick(t){let i=t.target;return!!this.overlay&&(this.overlay.isSameNode(i)||this.overlay.contains(i))}isOutsideClicked(t){return!(this.el.nativeElement.isSameNode(t.target)||this.el.nativeElement.contains(t.target)||this.isOverlayClick(t))}onInputFocus(t){this.focus=!0,this.onFocus.emit({originalEvent:t})}onInputBlur(t){this.focus=!1,this.onBlur.emit({originalEvent:t}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(t){if(!this.readonly)switch(t.originalEvent.which){case 40:var i=this.findNextItem(t.originalEvent.target.parentElement);i&&i.focus(),t.originalEvent.preventDefault();break;case 38:var l=this.findPrevItem(t.originalEvent.target.parentElement);l&&l.focus(),t.originalEvent.preventDefault();break;case 13:this.onOptionClick(t),t.originalEvent.preventDefault();break;case 9:this.hide()}}findNextItem(t){let i=t.nextElementSibling;return i?h.p.hasClass(i.children[0],"p-disabled")||h.p.isHidden(i.children[0])||h.p.hasClass(i,"p-multiselect-item-group")?this.findNextItem(i):i.children[0]:null}findPrevItem(t){let i=t.previousElementSibling;return i?h.p.hasClass(i.children[0],"p-disabled")||h.p.isHidden(i.children[0])||h.p.hasClass(i,"p-multiselect-item-group")?this.findPrevItem(i):i.children[0]:null}onKeydown(t){switch(t.which){case 40:!this.overlayVisible&&t.altKey&&(this.show(),t.preventDefault());break;case 32:this.overlayVisible||(this.show(),t.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let t="";for(let i=0;i<this.value.length;i++){let l=this.findLabelByValue(this.value[i]);l&&(t.length>0&&(t+=", "),t+=l)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=t;else{let i=/{(.*?)}/;this.valuesAsString=i.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(i)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(t){if(this.group){let i=null;for(let l=0;l<this.options.length;l++){let s=this.getOptionGroupChildren(this.options[l]);if(s&&(i=this.searchLabelByValue(t,s),i))break}return i}return this.searchLabelByValue(t,this.options)}searchLabelByValue(t,i){let l=null;for(let s=0;s<i.length;s++){let r=i[s],u=this.getOptionValue(r);if(null==t&&null==u||b.gb.equals(t,u,this.dataKey)){l=this.getOptionLabel(r);break}}return l}get allChecked(){let t=this.optionsToRender;if(!t||0===t.length)return!1;{let i=0,l=0,s=0,r=this.group?0:this.optionsToRender.length;for(let u of t)if(this.group)for(let m of this.getOptionGroupChildren(u)){let Z=this.isOptionDisabled(m),te=this.isSelected(m);if(Z)te?i++:l++;else{if(!te)return!1;s++}r++}else{let m=this.isOptionDisabled(u),Z=this.isSelected(u);if(m)Z?i++:l++;else{if(!Z)return!1;s++}}return r===i||r===s||s&&r===s+l+i}}get optionsToRender(){return this._filteredOptions||this.options}get emptyOptions(){let t=this.optionsToRender;return!t||0===t.length}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(p.ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(p.ws.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}onFilterInputChange(t){this._filterValue=t.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:t,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let t=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let i=[];for(let l of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(l),t,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&i.push(Object.assign(Object.assign({},l),{[this.optionGroupChildren]:s}))}this._filteredOptions=i}else this._filteredOptions=this.filterService.filter(this.options,t,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",i=>{!this.preventDocumentDefault&&this.isOutsideClicked(i)&&this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){h.p.isAndroid()||this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new h.V(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&b.P9.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(p.iZ),e.Y36(p.b4),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-multiSelect"]],contentQueries:function(t,i,l){if(1&t&&(e.Suo(l,p.$_,5),e.Suo(l,p.h4,5),e.Suo(l,p.jx,4)),2&t){let s;e.iGM(s=e.CRH())&&(i.footerFacet=s.first),e.iGM(s=e.CRH())&&(i.headerFacet=s.first),e.iGM(s=e.CRH())&&(i.templates=s)}},viewQuery:function(t,i){if(1&t&&(e.Gf(be,5),e.Gf(ve,5),e.Gf(xe,5)),2&t){let l;e.iGM(l=e.CRH())&&(i.containerViewChild=l.first),e.iGM(l=e.CRH())&&(i.filterInputChild=l.first),e.iGM(l=e.CRH())&&(i.accessibleViewChild=l.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(t,i){2&t&&e.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus||i.overlayVisible)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",virtualScroll:"virtualScroll",itemSize:"itemSize",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",scrollHeight:"scrollHeight",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide"},features:[e._Bn([ut])],ngContentSelectors:pt,decls:12,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["itemslist",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],["class","p-multiselect-empty-message",4,"ngIf"],[3,"option","selected","label","disabled","template","onClick","onKeydown"],[3,"ngStyle","itemSize",4,"ngIf"],[3,"ngStyle","itemSize"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(t,i){if(1&t){const l=e.EpF();e.F$t(st),e.TgZ(0,"div",0,1),e.NdJ("click",function(r){e.CHM(l);const u=e.MAs(4);return i.onMouseclick(r,u)}),e.TgZ(2,"div",2)(3,"input",3,4),e.NdJ("focus",function(r){return i.onInputFocus(r)})("blur",function(r){return i.onInputBlur(r)})("keydown",function(r){return i.onKeydown(r)}),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,Me,3,2,"ng-container",7),e.YNc(8,Fe,1,0,"ng-container",8),e.qZA()(),e.TgZ(9,"div",9),e._UZ(10,"span",10),e.qZA(),e.YNc(11,ot,9,20,"div",11),e.qZA()}2&t&&(e.Tol(i.styleClass),e.Q6J("ngClass",e.l5B(21,rt,i.overlayVisible,"chip"===i.display,i.focus,i.disabled))("ngStyle",i.style),e.xp6(3),e.Q6J("disabled",i.disabled),e.uIk("id",i.inputId)("name",i.name)("tabindex",i.tabindex)("aria-expanded",i.overlayVisible)("aria-labelledby",i.ariaLabelledBy),e.xp6(2),e.Q6J("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass),e.xp6(1),e.Q6J("ngClass",e.WLB(26,at,i.valuesAsString===(i.defaultLabel||i.placeholder),!(null!=i.valuesAsString&&0!==i.valuesAsString.length||null!=i.placeholder&&0!==i.placeholder.length))),e.xp6(1),e.Q6J("ngIf",!i.selectedItemsTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",i.selectedItemsTemplate)("ngTemplateOutletContext",e.VKq(29,w,i.value)),e.xp6(1),e.Q6J("ngClass",e.DdM(31,ct)),e.xp6(1),e.Q6J("ngClass",i.dropdownIcon),e.xp6(1),e.Q6J("ngIf",i.overlayVisible))},directives:[dt,S.N7,c.mk,c.PC,R.u,c.O5,c.sg,c.tP,J.H,S.xd,S.x0],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:normal;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}\n"],encapsulation:2,data:{animation:[(0,C.X$)("overlayAnimation",[(0,C.eR)(":enter",[(0,C.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,C.jt)("{{showTransitionParams}}")]),(0,C.eR)(":leave",[(0,C.jt)("{{hideTransitionParams}}",(0,C.oB)({opacity:0}))])])]},changeDetection:0}),n})(),_t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,p.m8,S.Cl,R.z,J.T],p.m8,S.Cl]}),n})();const $=function(n,o){return{"ng-dirty":n,"ng-invalid":o}};function mt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"p-dropdown",6),e.NdJ("onBlur",function(){return e.CHM(t),e.oxw().validateIfDirty()})("ngModelChange",function(l){return e.CHM(t),e.oxw().value=l}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("name",t.name)("id",t.name)("styleClass",t.inputClass)("appendTo",t.appendTo)("options",t.options)("optionLabel",t.optionLabel)("optionValue",t.optionValue)("placeholder",t.placeholder)("showClear",t.clearable)("required",t.required)("disabled",t.disabled)("readonly",t.readonly)("ngClass",e.WLB(14,$,t.hasErrors,t.hasErrors))("ngModel",t.value)}}function ft(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"p-multiSelect",7),e.NdJ("onBlur",function(){return e.CHM(t),e.oxw().validateIfDirty()})("ngModelChange",function(l){return e.CHM(t),e.oxw().value=l}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("name",t.name)("id",t.name)("styleClass",t.inputClass)("appendTo",t.appendTo)("options",t.options)("optionLabel",t.optionLabel)("optionValue",t.optionValue)("placeholder",t.placeholder)("required",t.required)("disabled",t.disabled)("readonly",t.readonly)("ngClass",e.WLB(13,$,t.hasErrors,t.hasErrors))("ngModel",t.value)}}function gt(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"*\xa0"),e.qZA())}function ht(n,o){if(1&n&&(e.TgZ(0,"label",8),e.YNc(1,gt,2,0,"span",9),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.Tol(t.labelClass),e.Q6J("for",t.name),e.xp6(1),e.Q6J("ngIf",t.required),e.xp6(2),e.Oqu(t.label)}}function bt(n,o){if(1&n&&(e.TgZ(0,"li",10),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}const vt=function(n){return{visible:n}};let K=(()=>{class n extends B.y{constructor(){super(...arguments),this.multiple=!1,this.placeholder="Select..."}get hasOptions(){var t,i;return null!==(i=(null===(t=this.options)||void 0===t?void 0:t.length)>0)&&void 0!==i&&i}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-input-select"]],inputs:{appendTo:"appendTo",multiple:"multiple",options:"options",optionLabel:"optionLabel",optionValue:"optionValue",clearable:"clearable",placeholder:"placeholder"},features:[e._Bn([{provide:B.y,useExisting:n}]),e.qOj],decls:6,vars:7,consts:[[1,"input-wrapper"],[3,"name","id","styleClass","appendTo","options","optionLabel","optionValue","placeholder","showClear","required","disabled","readonly","ngClass","ngModel","onBlur","ngModelChange",4,"ngIf"],["display","chip",3,"name","id","styleClass","appendTo","options","optionLabel","optionValue","placeholder","required","disabled","readonly","ngClass","ngModel","onBlur","ngModelChange",4,"ngIf"],[3,"for","class",4,"ngIf"],[1,"error-list",3,"ngClass"],["class","error-message",4,"ngFor","ngForOf"],[3,"name","id","styleClass","appendTo","options","optionLabel","optionValue","placeholder","showClear","required","disabled","readonly","ngClass","ngModel","onBlur","ngModelChange"],["display","chip",3,"name","id","styleClass","appendTo","options","optionLabel","optionValue","placeholder","required","disabled","readonly","ngClass","ngModel","onBlur","ngModelChange"],[3,"for"],[4,"ngIf"],[1,"error-message"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,mt,1,17,"p-dropdown",1),e.YNc(2,ft,1,16,"p-multiSelect",2),e.YNc(3,ht,4,5,"label",3),e.qZA(),e.TgZ(4,"ul",4),e.YNc(5,bt,2,1,"li",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.multiple),e.xp6(1),e.Q6J("ngIf",i.multiple),e.xp6(1),e.Q6J("ngIf",i.label),e.xp6(1),e.Q6J("ngClass",e.VKq(5,vt,i.showErrors&&i.hasErrors)),e.xp6(1),e.Q6J("ngForOf",i.errors))},directives:[c.O5,k.Lt,_.Q7,c.mk,_.JJ,_.On,G,c.sg],styles:["[_nghost-%COMP%]{display:inline-flex;flex-direction:column}[_nghost-%COMP%]   div.input-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-flex;flex-direction:column-reverse}[_nghost-%COMP%]   ul.error-list[_ngcontent-%COMP%]{max-height:0px;padding:0;margin:0;font-size:.8em;overflow:hidden;transition:.16s}[_nghost-%COMP%]   ul.error-list.visible[_ngcontent-%COMP%]{max-height:50px;padding:4px;overflow:auto}[_nghost-%COMP%]   ul.error-list[_ngcontent-%COMP%]   li.error-message[_ngcontent-%COMP%]{display:block;color:#eb445a;font-weight:500}[_nghost-%COMP%]   p-dropdown[_ngcontent-%COMP%]     .p-dropdown{width:100%}[_nghost-%COMP%]   p-multiSelect[_ngcontent-%COMP%]     .p-multiselect{width:100%}"]}),n})();function xt(n,o){1&n&&e.GkF(0)}function Ct(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"p-dialog",3),e.NdJ("visibleChange",function(l){return e.CHM(t),e.oxw().modalVisible=l}),e.YNc(1,xt,1,0,"ng-container",4),e.qZA()}if(2&n){const t=e.oxw(),i=e.MAs(3);e.Q6J("header","add"===t.type?"Add Profile":"Edit Profile")("modal",!0)("closable",!t.isSubmitting)("visible",t.modalVisible),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function yt(n,o){1&n&&e.GkF(0)}function Tt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,yt,1,0,"ng-container",4),e.BQk()),2&n){e.oxw();const t=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function St(n,o){if(1&n&&e._UZ(0,"p-message",19),2&n){const t=e.oxw(3);e.Q6J("text",t.error)}}function wt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).modalVisible=!1}),e.qZA()}}const Mt=function(){return{required:!0}};function Ft(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-form",7),e.NdJ("onSubmit",function(l){return e.CHM(t),e.oxw(2).onSubmit(l)}),e.TgZ(1,"app-form-group",8)(2,"app-input-select",9),e.NdJ("valueChange",function(l){return e.CHM(t),e.oxw(2).data.role=l}),e.qZA(),e.TgZ(3,"app-input-select",10),e.NdJ("valueChange",function(l){return e.CHM(t),e.oxw(2).data.organizationId=l}),e.qZA()(),e.TgZ(4,"div",11)(5,"div",12)(6,"label",13)(7,"p-checkbox",14),e.NdJ("ngModelChange",function(l){return e.CHM(t),e.oxw(2).data.isActive=l}),e.qZA(),e.TgZ(8,"span"),e._uU(9,"Active"),e.qZA()()()(),e.YNc(10,St,1,1,"p-message",15),e.TgZ(11,"div",16),e.YNc(12,wt,1,0,"button",17),e._UZ(13,"button",18),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.isSubmitting),e.xp6(2),e.Q6J("options",t.roleOptions)("validations",e.DdM(11,Mt))("value",t.data.role),e.xp6(1),e.Q6J("options",t.organizationOptions)("clearable",!0)("value",t.data.organizationId),e.xp6(4),e.Q6J("binary",!0)("ngModel",t.data.isActive),e.xp6(3),e.Q6J("ngIf",t.error),e.xp6(2),e.Q6J("ngIf",t.modal)}}function Ot(n,o){if(1&n&&(e.YNc(0,Ft,14,12,"app-form",5),e._UZ(1,"app-fullscreen-loader",6)),2&n){const t=e.oxw();e.Q6J("ngIf",t.data),e.xp6(1),e.Q6J("visible",t.isSubmitting)}}let L=(()=>{class n{constructor(t){this._profilesService=t,this.onSubmitSuccess=new e.vpe,this.modal=!1,this.modalVisible=!1,this._isSubmitting=!1}clear(){var t;null===(t=this._form)||void 0===t||t.clearInputs(),this._error=null}onSubmit(t){var i=this;return(0,f.Z)(function*(){if(t.isValid)try{i._isSubmitting=!0,i._error=null;const l=yield i.sendSubmission(i.type,i.data);i.onSubmitSuccess.emit(l)}catch(l){i.showHttpError(l)}finally{i._isSubmitting=!1}})()}sendSubmission(t,i){var l=this;return new Promise(function(){var s=(0,f.Z)(function*(r,u){try{let m=null;switch(t){case"add":m=yield l._profilesService.addProfile(i);break;case"edit":m=yield l._profilesService.updateProfile(i.id,i);break;default:throw"[FormType] property is invalid"}r(m.body)}catch(m){u(m.error)}});return function(r,u){return s.apply(this,arguments)}}())}showHttpError(t){this._error="string"==typeof t.error?t.error:t.message}get isSubmitting(){return this._isSubmitting}get error(){return this._error}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-profile-form"]],viewQuery:function(t,i){if(1&t&&e.Gf(v.i,5),2&t){let l;e.iGM(l=e.CRH())&&(i._form=l.first)}},inputs:{type:"type",data:"data",roleOptions:"roleOptions",organizationOptions:"organizationOptions",modal:"modal",modalVisible:"modalVisible"},outputs:{onSubmitSuccess:"onSubmitSuccess"},decls:4,vars:2,consts:[["styleClass","lg:w-6 lg:h-auto w-11 h-full",3,"header","modal","closable","visible","visibleChange",4,"ngIf"],[4,"ngIf"],["formTemplate",""],["styleClass","lg:w-6 lg:h-auto w-11 h-full",3,"header","modal","closable","visible","visibleChange"],[4,"ngTemplateOutlet"],[3,"disabled","onSubmit",4,"ngIf"],["text","Submitting...",3,"visible"],[3,"disabled","onSubmit"],["contentClass","grid mb-2"],["name","role","label","Role","labelClass","mb-2","optionLabel","key","optionValue","value","appendTo","body",1,"col",3,"options","validations","value","valueChange"],["name","organization","label","Organization","labelClass","mb-2","optionLabel","name","optionValue","id","appendTo","body",1,"col",3,"options","clearable","value","valueChange"],[1,"grid","mb-2"],[1,"col"],[1,"cursor-pointer"],["name","email-verified",1,"mr-2",3,"binary","ngModel","ngModelChange"],["severity","error","styleClass","block mt-4 mb-2",3,"text",4,"ngIf"],["slot","footer",1,"form-actions","text-right"],["pButton","","class","p-button-text","type","button","label","Cancel","icon","pi pi-times",3,"click",4,"ngIf"],["pButton","","type","submit","label","Submit","icon","pi pi-check",1,"p-button-text"],["severity","error","styleClass","block mt-4 mb-2",3,"text"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,Ct,2,5,"p-dialog",0),e.YNc(1,Tt,2,1,"ng-container",1),e.YNc(2,Ot,2,2,"ng-template",null,2,e.W1O)),2&t&&(e.Q6J("ngIf",i.modal),e.xp6(1),e.Q6J("ngIf",!i.modal))},directives:[c.O5,g.V,c.tP,v.i,D.H,K,T.XZ,_.JJ,_.On,y.q,x.Hq,O.l],styles:["[_nghost-%COMP%]   app-form[_ngcontent-%COMP%]{height:100%}"]}),n})();var j=a(5135),It=a(1720),Zt=a(4844),Pt=a(6709),W=a(7773),X=a(7307);function At(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().defaultContent;e.xp6(1),e.Oqu(t)}}function Ut(n,o){if(1&n&&e._UZ(0,"p-checkbox",15),2&n){const t=e.oxw().$implicit;e.Q6J("binary",!0)("readonly",!0)("ngModel",t.isEmailVerified)}}function Jt(n,o){if(1&n&&(e.YNc(0,At,2,1,"span",13),e.YNc(1,Ut,1,3,"p-checkbox",14)),2&n){const t=o.col;e.Q6J("ngIf","isEmailVerified"!==t.dataField),e.xp6(1),e.Q6J("ngIf","isEmailVerified"===t.dataField)}}function Lt(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",18),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw().onResetUserPassword(l)}),e.qZA(),e.TgZ(2,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw().onEditUser(l)}),e.qZA(),e.TgZ(3,"button",20),e.NdJ("click",function(l){e.CHM(t);const s=e.oxw().$implicit;return e.oxw().onDeleteUser(l,s)}),e.qZA(),e.BQk()}}function Qt(n,o){1&n&&(e.TgZ(0,"span",21),e._uU(1,"(You)"),e.qZA())}function Nt(n,o){if(1&n&&(e.YNc(0,Lt,4,0,"ng-container",16),e.YNc(1,Qt,2,0,"ng-template",null,17,e.W1O)),2&n){const t=o.$implicit,i=e.MAs(2),l=e.oxw();e.Q6J("ngIf",!l.isUserCurrentUser(t))("ngIfElse",i)}}function Vt(n,o){if(1&n&&e._UZ(0,"p-checkbox",15),2&n){const t=e.oxw().$implicit;e.Q6J("binary",!0)("readonly",!0)("ngModel",t.isActive)}}function Et(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().defaultContent;e.xp6(1),e.Oqu(t)}}function Ht(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,l=t.defaultContent,s=e.oxw(2);e.xp6(1),e.hij(" ",null!=i.organizationId?s.getOrganizationName(i.organizationId):l," ")}}function Dt(n,o){if(1&n&&(e.YNc(0,Vt,1,3,"p-checkbox",14),e.YNc(1,Et,2,1,"span",13),e.YNc(2,Ht,2,1,"span",13)),2&n){const t=o.col;e.Q6J("ngIf","isActive"===t.dataField),e.xp6(1),e.Q6J("ngIf","role"===t.dataField),e.xp6(1),e.Q6J("ngIf","organizationId"===t.dataField)}}function Yt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onEditProfile(s)}),e.qZA(),e.TgZ(1,"button",30),e.NdJ("click",function(l){const r=e.CHM(t).$implicit;return e.oxw(2).onDeleteProfile(l,r)}),e.qZA()}}function Bt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"h3",24),e._uU(3,"User Profiles"),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onAddProfile(s)}),e.qZA()(),e.TgZ(5,"app-table",26),e.YNc(6,Dt,3,3,"ng-template",null,27,e.W1O),e.YNc(8,Yt,2,0,"ng-template",null,28,e.W1O),e.TgZ(10,"div",9)(11,"span"),e._uU(12,"No profiles found"),e.qZA()()()()}if(2&n){const t=o.$implicit,i=e.MAs(7),l=e.MAs(9),s=e.oxw();e.xp6(5),e.Q6J("config",s.getProfilesTableConfig(t))("colBodyTemplate",i)("rowActionsTemplate",l)}}const Rt=[{path:"",component:(()=>{class n{constructor(t,i,l,s,r,u){this._usersService=t,this._profilesService=i,this._organizationsService=l,this._messageService=s,this._loginService=r,this._confirmService=u,this.usersTableConfig=new j.X({dataKey:"id",cols:[{header:"Email",dataField:"email",sortable:!0,filterable:!0},{header:"Last Name",dataField:"lastName",sortable:!0,filterable:!0},{header:"First Name",dataField:"firstName",sortable:!0,filterable:!0},{header:"Email Verified",dataField:"isEmailVerified",sortable:!0,filterable:!0,dataType:"boolean"}],options:{pagination:{enabled:!0,rows:10}}}),this.roles=[{key:"Administrator",value:"Administrator"},{key:"User",value:"User"}],this._profileTablesMap=new Map}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.loadingText="Loading users...",t.loadingVisible=!0,yield Promise.all([t.loadOrganizations(),t.loadUsers()]),t.loadingVisible=!1})()}loadOrganizations(){var t=this;return(0,f.Z)(function*(){try{const i=yield t._organizationsService.getAllOrganizations();t.organizations=i.body}catch(i){t.showHttpError("Failed to Load Organizations",i)}})()}loadUsers(){var t=this;return(0,f.Z)(function*(){try{const i={includes:{includeProfiles:!0}};null!=t.selectedRole&&(i.filters={profileRole:t.selectedRole.value});const l=yield t._usersService.getAllUsers(i);t.usersTableConfig.setData(l.body)}catch(i){t.showHttpError("Failed to Load Users",i)}})()}onRoleChange(t){var i=this;return(0,f.Z)(function*(){i.selectedRole=t.value,i.loadingText="Loading users...",i.loadingVisible=!0,yield i.loadUsers(),i.loadingVisible=!1})()}getProfilesTableConfig(t){let i=this._profileTablesMap.get(t);return null==i&&(i=new j.X({data:t.profiles,dataKey:"id",cols:[{header:"Active",dataField:"isActive",sortable:!0,filterable:!0,dataType:"boolean"},{header:"Role",dataField:"role",sortable:!0,filterable:!0,selectFilters:{options:this.roles,optionLabel:"key",optionValue:"value"}},{header:"Organization",dataField:"organizationId",sortable:!0,filterable:!0,selectFilters:{options:this.organizations,optionLabel:"name",optionValue:"id"}}]}),this._profileTablesMap.set(t,i)),i}onResetUserPassword(t){this._passResetModal.request={userId:t.id,newPassword:""},this._passResetModal.visible=!0}onAddUser(){this._userForm.clear(),this._userForm.data={email:"",password:"",firstName:"",lastName:"",isEmailVerified:!1},this._userForm.type="add",this._userForm.modalVisible=!0}onEditUser(t){this._userForm.clear(),setTimeout(()=>{this._userForm.data=Object.assign({},t),this._userForm.type="edit",this._userForm.modalVisible=!0})}onUserFormSuccess(t){this._userForm.modalVisible=!1,"add"===this._userForm.type?this.usersTableConfig.addData(t):this.usersTableConfig.updateFirstWhere(t,i=>i.id===t.id)}onDeleteUser(t,i){var l=this;this._confirmService.close(),setTimeout(()=>{var s;this._confirmService.confirm({target:t.target,message:"Are you sure you want to delete this user?",icon:p.dv.QUESTION,acceptButtonStyleClass:"p-button-danger",accept:(s=(0,f.Z)(function*(){return yield l.deleteUser(i)}),function(){return s.apply(this,arguments)})})},135)}deleteUser(t){var i=this;return(0,f.Z)(function*(){try{i.loadingText="Deleting user...",i.loadingVisible=!0,yield i._usersService.deleteUser(t.id),i.usersTableConfig.removeFirstWhere(l=>l.id===t.id)}catch(l){i.showHttpError("Failed to Delete User",l)}finally{i.loadingVisible=!1}})()}onAddProfile(t){this._profileForm.clear(),this._profileForm.type="add",this.showProfileFormModal({isActive:!1,role:"User",userId:t.id})}onEditProfile(t){this._profileForm.clear(),setTimeout(()=>{this._profileForm.type="edit";const i=Object.assign({},t);this.showProfileFormModal(i)})}showProfileFormModal(t){this._profileForm.data=t,this._profileForm.roleOptions=this.roles,this._profileForm.organizationOptions=this.organizations,this._profileForm.modalVisible=!0}onProfileFormSuccess(t){this._profileForm.modalVisible=!1,this._profileTablesMap.forEach((i,l)=>{t.userId!==l.id||("add"===this._profileForm.type?i.addData(t):i.updateFirstWhere(t,s=>s.id===t.id))})}onDeleteProfile(t,i){var l=this;this._confirmService.close(),setTimeout(()=>{var s;this._confirmService.confirm({target:t.target,message:"Are you sure you want to delete this profile?",icon:p.dv.QUESTION,acceptButtonStyleClass:"p-button-danger",accept:(s=(0,f.Z)(function*(){return yield l.deleteProfile(i)}),function(){return s.apply(this,arguments)})})},135)}deleteProfile(t){var i=this;return(0,f.Z)(function*(){try{i.loadingText="Deleting profile...",i.loadingVisible=!0,yield i._profilesService.deleteProfile(t.id),i._profileTablesMap.forEach((l,s)=>{t.userId!==s.id||l.removeFirstWhere(r=>r.id===t.id)})}catch(l){i.showHttpError("Failed to Delete Profile",l)}finally{i.loadingVisible=!1}})()}isUserCurrentUser(t){return t.id===this._loginService.user.id}getOrganizationName(t){var i;const l=this.organizations.find(s=>s.id===t);return null!==(i=null==l?void 0:l.name)&&void 0!==i?i:null}showHttpError(t,i){this._messageService.add({summary:t,detail:"string"==typeof i.error?i.error:i.message,severity:"error",sticky:!0})}get users(){return this.usersTableConfig.data}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(H),e.Y36(Y),e.Y36(It.z),e.Y36(p.ez),e.Y36(Zt.r),e.Y36(p.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-users"]],viewQuery:function(t,i){if(1&t&&(e.Gf(U,5),e.Gf(L,5),e.Gf(P,5)),2&t){let l;e.iGM(l=e.CRH())&&(i._userForm=l.first),e.iGM(l=e.CRH())&&(i._profileForm=l.first),e.iGM(l=e.CRH())&&(i._passResetModal=l.first)}},decls:22,vars:11,consts:[[1,"flex","align-items-end","justify-content-between","mb-3"],[1,"flex","flex-column"],[1,"mb-2","font-medium"],["styleClass","w-full","optionLabel","key","placeholder","Any Role",3,"options","showClear","ngModel","onChange","ngModelChange"],["pButton","","label","Add User","title","Add User","icon","pi pi-user-plus",3,"click"],[3,"config","colBodyTemplate","rowActionsTemplate","rowExpandTemplate"],["usersColBodyTemplate",""],["userActionsTemplate",""],["rowExpandTemplate",""],["slot","no-content",1,"p-3","font-medium","text-center","border-bottom-1","border-bluegray-100"],[3,"modal","onSubmitSuccess"],[3,"visible","text"],["position","bottom-right"],[4,"ngIf"],["class","pointer-events-none",3,"binary","readonly","ngModel",4,"ngIf"],[1,"pointer-events-none",3,"binary","readonly","ngModel"],[4,"ngIf","ngIfElse"],["currentUserBlock",""],["pButton","","icon","pi pi-key","title","Reset Password",1,"mr-2",3,"click"],["pButton","","icon","pi pi-pencil","title","Edit User",1,"mr-2",3,"click"],["pButton","","icon","pi pi-trash","title","Delete User",1,"p-button-danger",3,"click"],[1,"font-medium"],[1,"p-4","bg-cyan-50"],[1,"flex","align-items-center","justify-content-between","mb-3"],[1,"m-0","font-medium"],["pButton","","label","Add Profile","title","Add Profile","icon","pi pi-user-plus",3,"click"],[3,"config","colBodyTemplate","rowActionsTemplate"],["profilesColBodyTemplate",""],["profileActionsTemplate",""],["pButton","","icon","pi pi-pencil","title","Edit Profile",1,"mr-2",3,"click"],["pButton","","icon","pi pi-trash","title","Delete Profile",1,"p-button-danger",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"Filter users with role:"),e.qZA(),e.TgZ(4,"p-dropdown",3),e.NdJ("onChange",function(s){return i.onRoleChange(s)})("ngModelChange",function(s){return i.selectedRole=s}),e.qZA()(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.onAddUser()}),e.qZA()(),e.TgZ(6,"app-table",5),e.YNc(7,Jt,2,2,"ng-template",null,6,e.W1O),e.YNc(9,Nt,3,2,"ng-template",null,7,e.W1O),e.YNc(11,Bt,13,3,"ng-template",null,8,e.W1O),e.TgZ(13,"div",9)(14,"span"),e._uU(15,"No users found"),e.qZA()()(),e.TgZ(16,"app-user-form",10),e.NdJ("onSubmitSuccess",function(s){return i.onUserFormSuccess(s)}),e.qZA(),e.TgZ(17,"app-user-profile-form",10),e.NdJ("onSubmitSuccess",function(s){return i.onProfileFormSuccess(s)}),e.qZA(),e._UZ(18,"app-pass-reset-modal")(19,"app-fullscreen-loader",11)(20,"p-toast",12)(21,"p-confirmPopup")),2&t){const l=e.MAs(8),s=e.MAs(10),r=e.MAs(12);e.xp6(4),e.Q6J("options",i.roles)("showClear",!0)("ngModel",i.selectedRole),e.xp6(2),e.Q6J("config",i.usersTableConfig)("colBodyTemplate",l)("rowActionsTemplate",s)("rowExpandTemplate",r),e.xp6(10),e.Q6J("modal",!0),e.xp6(1),e.Q6J("modal",!0),e.xp6(2),e.Q6J("visible",i.loadingVisible)("text",i.loadingText)}},directives:[k.Lt,_.JJ,_.On,x.Hq,Pt.a,c.O5,T.XZ,U,L,P,O.l,W.FN,X.P],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;padding:20px}"]}),n})()}];let qt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[F.Bz.forChild(Rt)],F.Bz]}),n})();var zt=a(7022),ee=a(7665),I=a(2599),Q=a(5389);let Gt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[p.ez],imports:[[c.ez,_.u5,ee.g,g.S,T.nD,x.hJ,I.R,y.O,Q.I]]}),n})(),$t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,_.u5,k.kW,_t]]}),n})(),Kt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[p.ez],imports:[[c.ez,_.u5,$t,g.S,T.nD,x.hJ,I.R,y.O,Q.I]]}),n})(),jt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[p.ez],imports:[[c.ez,g.S,Q.I,ee.g,x.hJ,y.O,I.R]]}),n})(),Wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[p.YP],imports:[[c.ez,_.u5,qt,zt.U,T.nD,x.hJ,k.kW,W.EV,Gt,Kt,jt,X.n,I.R]]}),n})()}}]);