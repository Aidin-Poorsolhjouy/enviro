(self.webpackChunkEVC_UI_Web_Admin=self.webpackChunkEVC_UI_Web_Admin||[]).push([[507],{1720:(R,a,i)=>{"use strict";i.d(a,{z:()=>t});var o=i(3458),e=i(7587),n=i(520);let t=(()=>{class r extends o.f{constructor(s){super(s),this._apiPrefix="organizations"}getAllOrganizations(s){const u=`${this._apiPrefix}${this.getObjectQueryParams(Object.assign(Object.assign({},null==s?void 0:s.filters),null==s?void 0:s.includes))}`;return this.get(u)}getOrganization(s,u){const m=`${this._apiPrefix}/${s}${this.getObjectQueryParams(u)}`;return this.get(m)}addOrganization(s){return this.post(this._apiPrefix,s)}updateOrganization(s,u){return this.put(`${this._apiPrefix}/${s}`,u)}deleteOrganization(s){return this.delete(`${this._apiPrefix}/${s}`)}}return r.\u0275fac=function(s){return new(s||r)(e.LFG(n.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},7450:(R,a,i)=>{"use strict";i.d(a,{t:()=>G});var o=i(5861),e=i(9783),n=(()=>{return(U=n||(n={}))[U.Activate=1]="Activate",U[U.Deactivate=2]="Deactivate",n;var U})(),t=i(7587);class r{constructor(f,c){this.onDataChange=new t.vpe,this._isRequesting=!1,this.handlers=null!=f?f:{},this._data=c}requestGet(){var f=this;return(0,o.Z)(function*(){var c,d;const D=yield f.request(null!==(d=null===(c=f.handlers)||void 0===c?void 0:c.get)&&void 0!==d?d:null);return f.setCache(D),f._data})()}getCacheOrRequest(){var f=this;return(0,o.Z)(function*(){return f.hasData?f._data:yield f.requestGet()})()}requestAdd(f){var c=this;return(0,o.Z)(function*(){var d;const D=yield c.request(null!=(null===(d=c.handlers)||void 0===d?void 0:d.add)?()=>c.handlers.add(f):null);return c.addInCache(D),D})()}requestUpdate(f,c){var d=this;return(0,o.Z)(function*(){var D;const Z=yield d.request(null!=(null===(D=d.handlers)||void 0===D?void 0:D.update)?()=>d.handlers.update(f,c):null);return d.updateInCache(f,Z),Z})()}requestDelete(f){var c=this;return(0,o.Z)(function*(){var d;const D=yield c.request(null!=(null===(d=c.handlers)||void 0===d?void 0:d.delete)?()=>c.handlers.delete(f):null);return c.deleteInCache(f),D})()}setCache(f){const c=this._data!==f;return c&&(this._data=f,this.onDataChange.emit(this._data)),c}addInCache(...f){let c=!1;if(null==this._data)this._data=f,c=!0;else for(let d=0;d<f.length;d++)this._data.includes(f[d])||(this._data.push(f[d]),c=!0);return c}updateInCache(f,c){var d,D;const Z=null!==(D=null===(d=this._data)||void 0===d?void 0:d.indexOf(f))&&void 0!==D?D:-1,J=-1!==Z;return J&&(Object.assign(this._data[Z],c),this.onDataChange.emit(this._data)),J}deleteInCache(f){var c,d;const D=null!==(d=null===(c=this._data)||void 0===c?void 0:c.indexOf(f))&&void 0!==d?d:-1,Z=-1!==D;return Z&&(this._data.splice(D,1),this.onDataChange.emit(this._data)),Z}updateFirstInCache(f,c){let d=!1;if(this.hasData&&null!=c){const D=this._data.findIndex(c);null!=D&&(Object.assign(this._data[D],f),d=!0)}return d&&this.onDataChange.emit(this._data),d}updateAllInCache(f,c){let d=0;if(this.hasData&&null!=c)for(let D=0;D<this._data.length;D++)c(this._data[D])&&(Object.assign(this._data[D],f),d++);return d>0&&this.onDataChange.emit(this._data),d}deleteFirstInCache(f){let c=!1;if(this.hasData&&null!=f){const d=this._data.findIndex(f);null!=d&&(this._data.splice(d,1),c=!0)}return c&&this.onDataChange.emit(this._data),c}deleteAllInCache(f){let c=0;if(this.hasData&&null!=f)for(let d=this._data.length-1;d>=0;d--)f(this._data[d])&&(this._data.splice(d,1),c++);return c>0&&this.onDataChange.emit(this._data),c}clearCache(){this.hasData&&(this._data=null,this.onDataChange.emit(this._data))}request(f){var c=this;return new Promise(function(){var d=(0,o.Z)(function*(D,Z){var J;try{if(c._isRequesting)throw new Error("DataStore cannot send request because another request is already in-progress.");if(null==f)throw new Error("DataStore cannot send request because handler was not defined.");c._isRequesting=!0;const W=yield f();c._isRequesting=!1,D(W.body)}catch(W){c._isRequesting=!1,null!=(null===(J=c.handlers)||void 0===J?void 0:J.error)&&c.handlers.error(W),Z(W)}});return function(D,Z){return d.apply(this,arguments)}}())}get data(){return this._data}get hasData(){var f,c;return null!==(c=(null===(f=this._data)||void 0===f?void 0:f.length)>0)&&void 0!==c&&c}get isRequesting(){return this._isRequesting}}var l=i(5461),s=i(8801),u=i(5135),m=i(8756),w=i(1720),h=i(9808),I=i(845),v=i(6709),T=i(1208),M=i(2382),b=i(3654),E=i(7888),F=i(4762),x=i(7766),A=i(7773),L=i(7307),B=i(7758);function _(U,f){if(1&U){const c=t.EpF();t.TgZ(0,"div",9)(1,"button",10),t.NdJ("click",function(){return t.CHM(c),t.oxw().onAddDevice()}),t.qZA()()}if(2&U){const c=t.oxw();t.xp6(1),t.Q6J("disabled",c.loadingVisible)}}function P(U,f){1&U&&t.GkF(0)}function O(U,f){if(1&U&&(t.ynx(0),t.YNc(1,P,1,0,"ng-container",15),t.BQk()),2&U){t.oxw();const c=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function p(U,f){1&U&&t.GkF(0)}function N(U,f){if(1&U&&(t.ynx(0),t.YNc(1,p,1,0,"ng-container",15),t.BQk()),2&U){t.oxw();const c=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",c)}}function g(U,f){if(1&U&&(t.ynx(0),t._uU(1),t.BQk()),2&U){const c=t.oxw().defaultContent;t.xp6(1),t.Oqu(c)}}function C(U,f){if(1&U&&t._UZ(0,"p-checkbox",16),2&U){const c=t.oxw().value;t.Q6J("binary",!0)("readonly",!0)("ngModel",c)}}function y(U,f){1&U&&(t.ynx(0,11),t.YNc(1,O,2,1,"ng-container",12),t.YNc(2,N,2,1,"ng-container",12),t.YNc(3,g,2,1,"ng-container",13),t.BQk(),t.YNc(4,C,1,3,"ng-template",null,14,t.W1O)),2&U&&(t.Q6J("ngSwitch",f.col.dataField),t.xp6(1),t.Q6J("ngSwitchCase","isSimulated"),t.xp6(1),t.Q6J("ngSwitchCase","isActive"))}function S(U,f){if(1&U){const c=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){const Z=t.CHM(c).$implicit;return t.oxw().onAssignDevice(Z)}),t.qZA(),t.TgZ(1,"button",18),t.NdJ("click",function(){const Z=t.CHM(c).$implicit;return t.oxw().onEditDevice(Z)}),t.qZA(),t.TgZ(2,"button",19),t.NdJ("click",function(D){const J=t.CHM(c).$implicit;return t.oxw().onDeleteDevice(D,J)}),t.qZA()}}function z(U,f){if(1&U){const c=t.EpF();t.TgZ(0,"div",21)(1,"span",22),t._uU(2,"Actions"),t.qZA(),t.TgZ(3,"div",23)(4,"button",32),t.NdJ("click",function(){t.CHM(c);const D=t.oxw().$implicit;return t.oxw().onTurnDeviceOn(D)}),t.qZA(),t.TgZ(5,"button",33),t.NdJ("click",function(){t.CHM(c);const D=t.oxw().$implicit;return t.oxw().onTurnDeviceOff(D)}),t.qZA()()()}if(2&U){const c=t.oxw(2);t.xp6(4),t.Q6J("loading",c.isTurningDeviceOn)("disabled",c.isTurningDeviceOff),t.xp6(1),t.Q6J("loading",c.isTurningDeviceOff)("disabled",c.isTurningDeviceOn)}}function Q(U,f){if(1&U&&(t.TgZ(0,"div",20)(1,"div",21)(2,"span",22),t._uU(3,"Device QR-Code"),t.qZA(),t.TgZ(4,"div",23),t._UZ(5,"app-qr-code-img",24),t.qZA()(),t.TgZ(6,"div",21)(7,"span",22),t._uU(8,"Data Details"),t.qZA(),t.TgZ(9,"ul",25)(10,"li",26),t._UZ(11,"app-mini-info",27),t.ALo(12,"timeSpan"),t.qZA(),t.TgZ(13,"li",26),t._UZ(14,"app-mini-info",28),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"li",29),t._UZ(17,"app-mini-info",30),t.ALo(18,"date"),t.qZA()()(),t.YNc(19,z,6,4,"div",31),t.qZA()),2&U){const c=f.$implicit,d=t.oxw();t.xp6(5),t.Q6J("qrValue",c.identifier)("downloadName",c.identifier+".png"),t.xp6(6),t.Q6J("data",null!=c.updateInterval?t.xi3(12,6,c.updateInterval,"full"):"N/A"),t.xp6(3),t.Q6J("data",null!=c.activeStartDate?t.xi3(15,9,c.activeStartDate+"Z","short"):"N/A"),t.xp6(3),t.Q6J("data",null!=c.lastUpdate?t.xi3(18,12,c.lastUpdate+"Z","short"):"N/A"),t.xp6(2),t.Q6J("ngIf",d.showDeviceActions)}}function H(U,f){if(1&U){const c=t.EpF();t.ynx(0),t.TgZ(1,"app-iot-device-form",34),t.NdJ("onSubmitSuccess",function(D){return t.CHM(c),t.oxw().onDeviceFormSubmit(D)}),t.qZA(),t.TgZ(2,"app-device-assign-form",35),t.NdJ("onHide",function(){return t.CHM(c),t.oxw().assigningDevice=null})("onAssign",function(D){return t.CHM(c),t.oxw().onDeviceAssigned(D)}),t.qZA(),t.BQk()}if(2&U){const c=t.oxw();t.xp6(1),t.Q6J("modal",!0),t.xp6(1),t.Q6J("device",c.assigningDevice)("organizationOptions",c.organizations)("visible",null!=c.assigningDevice)}}let G=(()=>{class U{constructor(c,d,D,Z){this._devicesService=c,this._messageService=d,this._confirmService=D,this.adminFeatures=!1,this.showDeviceActions=!1,this._isTurningDeviceOn=!1,this._isTurningDeviceOff=!1,this._devicesStore=new r({delete:J=>c.deleteIotDevice(J.id)}),this._organizationsStore=new r({get:()=>Z.getAllOrganizations()})}ngOnInit(){this.loadDevices(this.organizationId)}loadDevices(c){var d=this;return(0,o.Z)(function*(){d.organizationId=c,d._devicesStore.handlers.get=()=>d._devicesService.getAllIotDevices({filters:{organizationId:c}});try{d._loadingText="Loading devices...",yield Promise.all([d._organizationsStore.requestGet(),d._devicesStore.requestGet()]),d.assignDeviceOrganizations(d.devices,d.organizations),d._tableConfig=d.createTableConfig(d.devices,d.organizations)}catch(D){d.showHttpError("An Error has Occurred",D)}})()}assignDeviceOrganizations(c,d){for(let D=0;D<c.length;D++){const Z=c[D];null!=Z.organizationId&&(Z.organization=d.find(J=>J.id===Z.organizationId))}}createTableConfig(c,d){return new u.X({dataKey:"id",data:c,cols:[{header:"Name",dataField:"name",sortable:!0,filterable:!0},{header:"Identifier",dataField:"identifier",sortable:!0,filterable:!0},{header:"Is Simulated",dataField:"isSimulated",sortable:!0,filterable:!0,dataType:"boolean",visible:this.adminFeatures},{header:"Is Active",dataField:"isActive",sortable:!0,filterable:!0,dataType:"boolean"},{header:"Assigned Organization",dataField:"organization.name",cssClass:"assigned-unit",sortable:!0,filterable:!0,selectFilters:{options:d,optionLabel:"name",optionValue:"id"}}],options:{pagination:{enabled:!0,rows:10},colResize:!0,gridLines:!0}})}onAddDevice(){this._deviceForm.clear(),setTimeout(()=>{const c={name:"",description:"",updateInterval:new l.i(1).toString(),isSimulated:!1,isActive:!1};this._deviceForm.data=c,this._deviceForm.type="add",this._deviceForm.modalVisible=!0})}onEditDevice(c){this._deviceForm.clear(),setTimeout(()=>{this._deviceForm.data=Object.assign({},c),this._deviceForm.type="edit",this._deviceForm.modalVisible=!0})}onDeleteDevice(c,d){var D=this;this._confirmService.close(),setTimeout(()=>{var Z;this._confirmService.confirm({target:c.target,message:"Are you sure you want to delete this device?",icon:e.dv.QUESTION,acceptButtonStyleClass:"p-button-danger",accept:(Z=(0,o.Z)(function*(){return yield D.deleteDevice(d)}),function(){return Z.apply(this,arguments)})})},135)}deleteDevice(c){var d=this;return(0,o.Z)(function*(){try{d._loadingText="Deleting device...";const D=c.id;yield d._devicesStore.requestDelete(c),d._tableConfig.removeFirstWhere(Z=>Z.id===D)}catch(D){d.showHttpError("Failed to Delete Device",D)}})()}onDeviceFormSubmit(c){if(this._deviceForm.modalVisible=!1,"add"===this._deviceForm.type)this._tableConfig.addData(c),this._devicesStore.addInCache(c);else{const d=this._devicesStore.data.find(D=>D.id===c.id);c.organization=null==d?void 0:d.organization,this.updateDevice(c)}}updateDevice(c){const d=D=>D.id===c.id;this._tableConfig.updateFirstWhere(c,d),this._devicesStore.updateFirstInCache(c,d)}onAssignDevice(c){this.assigningDevice=Object.assign({},c)}onDeviceAssigned(c){this.assigningDevice=null,this.updateDevice(c)}onTurnDeviceOn(c){var d=this;return(0,o.Z)(function*(){d._isTurningDeviceOn=!0;const D={deviceId:c.id,messageType:n.Activate};yield d.sendDeviceMessage(c,D),d._isTurningDeviceOn=!1})()}onTurnDeviceOff(c){var d=this;return(0,o.Z)(function*(){d._isTurningDeviceOff=!0;const D={deviceId:c.id,messageType:n.Deactivate};yield d.sendDeviceMessage(c,D),d._isTurningDeviceOff=!1})()}sendDeviceMessage(c,d){var D=this;return(0,o.Z)(function*(){try{const Z=yield D._devicesService.sendDeviceMessage(d);JSON.parse(Z.body.data),D.showSuccessToast("Success",Z.body.message)}catch(Z){D.showHttpError(`Failed to ${d.messageType===n.Activate?"Turn On":"Turn Off"} Device`,Z)}})()}showSuccessToast(c,d){this._messageService.add({severity:"success",summary:c,detail:d})}showHttpError(c,d){this._messageService.add({severity:"error",summary:c,detail:"string"==typeof d.error?d.error:d.message,sticky:!0})}get devices(){return this._devicesStore.data}get organizations(){return this._organizationsStore.data}get loadingVisible(){return this._devicesStore.isRequesting||this._organizationsStore.isRequesting}get tableConfig(){return this._tableConfig}get loadingText(){return this._loadingText}get isTurningDeviceOn(){return this._isTurningDeviceOn}get isTurningDeviceOff(){return this._isTurningDeviceOff}}return U.\u0275fac=function(c){return new(c||U)(t.Y36(m.p),t.Y36(e.ez),t.Y36(e.YP),t.Y36(w.z))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-devices-table"]],viewQuery:function(c,d){if(1&c&&t.Gf(s.V,5),2&c){let D;t.iGM(D=t.CRH())&&(d._deviceForm=D.first)}},inputs:{adminFeatures:"adminFeatures",showDeviceActions:"showDeviceActions",organizationId:"organizationId"},decls:15,vars:8,consts:[["class","text-right mb-3",4,"ngIf"],[3,"config","colBodyTemplate","rowActionsTemplate","rowExpandTemplate"],["colBodyTemplate",""],["actionsTemplate",""],["rowExpandTemplate",""],["slot","no-content",1,"p-3","font-medium","text-center","border-bottom-1","border-bluegray-100"],[4,"ngIf"],[3,"visible","text"],["position","bottom-right"],[1,"text-right","mb-3"],["pButton","","label","Add Device","title","Add Device","icon","pi pi-cloud-upload",3,"disabled","click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["boolColTemplate",""],[4,"ngTemplateOutlet"],[1,"pointer-events-none",3,"binary","readonly","ngModel"],["pButton","","icon","pi pi-building","title","Assign Device to Organization",1,"mr-2",3,"click"],["pButton","","icon","pi pi-pencil","title","Edit Device",1,"mr-2",3,"click"],["pButton","","icon","pi pi-trash","title","Delete Device",1,"p-button-danger",3,"click"],[1,"device-info","fadeinup"],[1,"device-info-card","shadow-1"],[1,"block","font-semibold","text-lg"],[1,"mt-3"],[3,"qrValue","downloadName"],[1,"p-0"],[1,"block","mb-2"],["meta","Update Interval:","iconStart","refresh",3,"data"],["meta","Active Start Date:","iconStart","calendar",3,"data"],[1,"block"],["meta","Last Update:","iconStart","calendar",3,"data"],["class","device-info-card shadow-1",4,"ngIf"],["pButton","","label","Turn On","icon","pi pi-power-off",1,"block","w-full","mb-2",3,"loading","disabled","click"],["pButton","","label","Turn Off","icon","pi pi-power-off",1,"block","w-full","p-button-secondary",3,"loading","disabled","click"],[3,"modal","onSubmitSuccess"],[3,"device","organizationOptions","visible","onHide","onAssign"]],template:function(c,d){if(1&c&&(t.YNc(0,_,2,1,"div",0),t.TgZ(1,"app-table",1),t.YNc(2,y,6,3,"ng-template",null,2,t.W1O),t.YNc(4,S,3,0,"ng-template",null,3,t.W1O),t.YNc(6,Q,20,15,"ng-template",null,4,t.W1O),t.TgZ(8,"div",5)(9,"span"),t._uU(10,"No devices found"),t.qZA()()(),t.YNc(11,H,3,4,"ng-container",6),t._UZ(12,"app-fullscreen-loader",7)(13,"p-toast",8)(14,"p-confirmPopup")),2&c){const D=t.MAs(3),Z=t.MAs(5),J=t.MAs(7);t.Q6J("ngIf",d.adminFeatures),t.xp6(1),t.Q6J("config",d.tableConfig)("colBodyTemplate",D)("rowActionsTemplate",d.adminFeatures?Z:null)("rowExpandTemplate",J),t.xp6(10),t.Q6J("ngIf",d.adminFeatures),t.xp6(1),t.Q6J("visible",d.loadingVisible)("text",d.loadingText)}},directives:[h.O5,I.Hq,v.a,h.RF,h.n9,h.tP,h.ED,T.XZ,M.JJ,M.On,b.$,E.E,s.V,F.G,x.l,A.FN,L.P],pipes:[B.i,h.uU],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;width:100%;height:100%;padding:20px}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     app-unit-breadcrumbs{flex-flow:row-reverse;--breadcrumb-margin: .1rem .65rem;--unit-font-weight: 600}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     .expand-col{flex:100%}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     .col.name{flex-basis:14%}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     .col.identifier{flex-basis:23%}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     .col.isSimulated, [_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     .col.isActive{flex-basis:13%}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     .col.assigned-unit{flex-basis:33%}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     .actions-col{min-width:12rem}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     div.row-expand-content{overflow:auto}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     div.row-expand-content div.device-info{display:flex;flex-wrap:wrap;padding:1rem;background-color:var(--cyan-50);overflow:auto}[_nghost-%COMP%]   app-table[_ngcontent-%COMP%]     div.row-expand-content div.device-info div.device-info-card{flex:1 0;margin:1rem;padding:1.5rem;background-color:var(--cyan-400);border-radius:var(--border-radius)}"]}),U})()},507:(R,a,i)=>{"use strict";i.d(a,{j:()=>U});var o=i(9808),e=i(2382),n=i(9783),t=i(845),r=i(1208),l=i(7307),s=i(7022),u=i(7773),m=i(6742),w=i(5315),h=i(9208),I=i(4119),v=i(2599),M=(i(4762),i(7587));let E=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=M.oAB({type:f}),f.\u0275inj=M.cJS({imports:[[o.ez,w.S,s.U,t.hJ,h.o,I.z,v.R]]}),f})();var F=i(3724),x=i(7665),A=i(5555),L=i(7754),B=i(1424);i(2446);let O=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=M.oAB({type:f}),f.\u0275inj=M.cJS({imports:[[o.ez,e.u5,B.j]]}),f})();var p=i(5389);i(8801);let C=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=M.oAB({type:f}),f.\u0275inj=M.cJS({providers:[n.ez],imports:[[o.ez,w.S,p.I,x.g,A.R,L.z,O,m.O,t.hJ,F.O,v.R]]}),f})();var y=i(159);i(3654);let Q=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=M.oAB({type:f}),f.\u0275inj=M.cJS({imports:[[o.ez,y.OF,t.hJ]]}),f})();i(7450);let U=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=M.oAB({type:f}),f.\u0275inj=M.cJS({providers:[n.ez,n.YP],imports:[[o.ez,e.u5,t.hJ,s.U,r.nD,h.o,m.O,v.R,u.EV,C,E,l.n,Q]]}),f})()},4762:(R,a,i)=>{"use strict";i.d(a,{G:()=>x});var o=i(5861),e=i(7587),n=i(5135),t=i(8756),r=i(5315),l=i(9808),s=i(7888),u=i(845),m=i(4119),w=i(6709),h=i(9783),I=i(7766);function v(A,L){if(1&A){const B=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(B),e.oxw(2).onUnassignDevice()}),e.qZA()}}function T(A,L){if(1&A){const B=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(B);const P=e.oxw().$implicit;return e.oxw(2).onOrganizationSelected(P)}),e.qZA()}}function M(A,L){1&A&&(e.TgZ(0,"span",19),e._uU(1,"(Current Organization)"),e.qZA())}function b(A,L){if(1&A&&(e.YNc(0,T,1,0,"button",16),e.YNc(1,M,2,0,"ng-template",null,17,e.W1O)),2&A){const B=L.$implicit,_=e.MAs(2),P=e.oxw(2);e.Q6J("ngIf",B.id!==P.device.organizationId)("ngIfElse",_)}}function E(A,L){if(1&A){const B=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(B),e.oxw(2).error=null}),e.qZA()}}function F(A,L){if(1&A&&(e.ynx(0),e.TgZ(1,"div",2)(2,"span",3),e._uU(3,"Device:"),e.qZA(),e.TgZ(4,"div",4)(5,"div"),e._UZ(6,"app-mini-info",5)(7,"app-mini-info",6),e.qZA(),e.YNc(8,v,1,0,"button",7),e.qZA()(),e.TgZ(9,"div",8)(10,"span",3),e._uU(11,"Organization Options:"),e.qZA(),e.TgZ(12,"div",9)(13,"app-table",10),e.YNc(14,b,3,2,"ng-template",null,11,e.W1O),e.qZA()()(),e.TgZ(16,"p-dialog",12)(17,"p"),e._uU(18),e.qZA(),e.YNc(19,E,1,0,"ng-template",13),e.qZA(),e._UZ(20,"app-fullscreen-loader",14),e.BQk()),2&A){const B=e.MAs(15),_=e.oxw();e.xp6(6),e.Q6J("data",_.device.name),e.xp6(1),e.Q6J("data",_.device.identifier),e.xp6(1),e.Q6J("ngIf",null!=_.device.organizationId),e.xp6(5),e.Q6J("config",_.tableConfig)("rowActionsTemplate",B),e.xp6(3),e.Q6J("modal",!0)("visible",null!=_.error),e.xp6(2),e.Oqu(_.error),e.xp6(2),e.Q6J("visible",_.isSubmitting)}}let x=(()=>{class A{constructor(B){this._devicesService=B,this.onAssign=new e.vpe,this.onHide=new e.vpe,this.visible=!0,this.tableConfig=new n.X({dataKey:"id",cols:[{header:"Name",dataField:"name",sortable:!0,filterable:!0},{header:"Address",dataField:"fullAddress",sortable:!0,filterable:!0}],options:{pagination:{enabled:!0,rows:10}}}),this._isSubmitting=!1}onOrganizationSelected(B){var _=this;return(0,o.Z)(function*(){const P={deviceId:_.device.id,organizationId:B.id};yield _.sendAssignRequest(P,_.device,B)})()}onUnassignDevice(){var B=this;return(0,o.Z)(function*(){const _={deviceId:B.device.id};yield B.sendAssignRequest(_,B.device)})()}sendAssignRequest(B,_,P){var O=this;return(0,o.Z)(function*(){try{O._isSubmitting=!0,O.error=null,yield O._devicesService.assignDevice(B),null!=P?(_.organizationId=P.id,_.organization=P):(_.organizationId=null,_.organization=null),O.onAssign.emit(_)}catch(p){O.showHttpError(p)}finally{O._isSubmitting=!1}})()}showHttpError(B){this.error="string"==typeof B.error?B.error:B.message}get organizationOptions(){return this.tableConfig.data}set organizationOptions(B){this.tableConfig.setData(B)}get isSubmitting(){return this._isSubmitting}}return A.\u0275fac=function(B){return new(B||A)(e.Y36(t.p))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-device-assign-form"]],inputs:{visible:"visible",device:"device",organizationOptions:"organizationOptions"},outputs:{onAssign:"onAssign",onHide:"onHide"},decls:2,vars:4,consts:[["header","Assign Device","styleClass","lg:w-8 lg:h-auto w-11 h-full",3,"modal","closable","visible","onHide","visibleChange"],[4,"ngIf"],[1,"current-assign-section"],[1,"block","mb-2","font-semibold","text-lg"],[1,"flex","align-items-center","justify-content-between","p-3","mb-4","shadow-1","bg-cyan-50"],["meta","Name:",1,"mb-1",3,"data"],["meta","Identifier:",3,"data"],["pButton","","icon","pi pi-times","label","Unassign","title","Unassign Device","pTooltip","Unassign this device from its current organization","tooltipPosition","left",3,"click",4,"ngIf"],[1,"assign-options-section"],[1,"p-3","shadow-1","bg-cyan-50"],[3,"config","rowActionsTemplate"],["rowActionsTemplate",""],["styleClass","w-4","header","An Error Occurred",3,"modal","visible"],["pTemplate","footer"],["text","Updating...",3,"visible"],["pButton","","icon","pi pi-times","label","Unassign","title","Unassign Device","pTooltip","Unassign this device from its current organization","tooltipPosition","left",3,"click"],["pButton","","icon","pi pi-check","label","Assign","title","Assign to Organization",3,"click",4,"ngIf","ngIfElse"],["currentOrganizationTemplate",""],["pButton","","icon","pi pi-check","label","Assign","title","Assign to Organization",3,"click"],[1,"font-semibold"],["pButton","","label","OK",1,"p-button-text",3,"click"]],template:function(B,_){1&B&&(e.TgZ(0,"p-dialog",0),e.NdJ("onHide",function(){return _.onHide.emit()})("visibleChange",function(O){return _.visible=O}),e.YNc(1,F,21,9,"ng-container",1),e.qZA()),2&B&&(e.Q6J("modal",!0)("closable",!_.isSubmitting)("visible",_.visible),e.xp6(1),e.Q6J("ngIf",null!=_.device&&null!=_.organizationOptions))},directives:[r.V,l.O5,s.E,u.Hq,m.u,w.a,h.jx,I.l],styles:["[_nghost-%COMP%]   div.assign-options-section[_ngcontent-%COMP%]   app-table[_ngcontent-%COMP%]{height:50vh}"]}),A})()},8801:(R,a,i)=>{"use strict";i.d(a,{V:()=>O});var o=i(5861),e=i(7587),n=i(3678),t=i(8756),r=i(9808),l=i(5315),s=i(6175),u=i(8655),m=i(8567),w=i(2446),h=i(6888),I=i(3724),v=i(845),T=i(7766),M=i(7758);function b(p,N){1&p&&e.GkF(0)}function E(p,N){if(1&p){const g=e.EpF();e.TgZ(0,"p-dialog",3),e.NdJ("visibleChange",function(y){return e.CHM(g),e.oxw().modalVisible=y}),e.YNc(1,b,1,0,"ng-container",4),e.qZA()}if(2&p){const g=e.oxw(),C=e.MAs(3);e.Q6J("header","add"===g.type?"Add Device":"Edit Device")("modal",!0)("closable",!g.isSubmitting)("visible",g.modalVisible),e.xp6(1),e.Q6J("ngTemplateOutlet",C)}}function F(p,N){1&p&&e.GkF(0)}function x(p,N){if(1&p&&(e.ynx(0),e.YNc(1,F,1,0,"ng-container",4),e.BQk()),2&p){e.oxw();const g=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",g)}}function A(p,N){if(1&p&&e._UZ(0,"p-message",24),2&p){const g=e.oxw(3);e.Q6J("text",g.error)}}function L(p,N){if(1&p){const g=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(g),e.oxw(3).modalVisible=!1}),e.qZA()}}const B=function(){return{required:!0}};function _(p,N){if(1&p){const g=e.EpF();e.TgZ(0,"app-form",7),e.NdJ("onSubmit",function(y){return e.CHM(g),e.oxw(2).onSubmit(y)}),e.TgZ(1,"app-form-group",8)(2,"app-input",9),e.NdJ("valueChange",function(y){return e.CHM(g),e.oxw(2).data.name=y}),e.qZA(),e._UZ(3,"app-input",10),e.TgZ(4,"app-input",11),e.NdJ("valueChange",function(y){return e.CHM(g),e.oxw(2).data.connectionString=y}),e.qZA()(),e.TgZ(5,"app-form-group",12)(6,"app-input-toggle",13),e.NdJ("valueChange",function(y){return e.CHM(g),e.oxw(2).data.isSimulated=y}),e.qZA(),e.TgZ(7,"app-input-time-span",14),e.NdJ("valueChange",function(y){return e.CHM(g),e.oxw(2).data.updateInterval=y.toString()}),e.ALo(8,"timeSpan"),e.qZA(),e.TgZ(9,"app-input",15),e.NdJ("valueChange",function(y){return e.CHM(g),e.oxw(2).data.lastUpdate=y}),e.qZA()(),e.TgZ(10,"app-form-group",16)(11,"app-input-toggle",17),e.NdJ("valueChange",function(y){return e.CHM(g),e.oxw(2).data.isActive=y}),e.qZA(),e.TgZ(12,"app-input",18),e.NdJ("valueChange",function(y){return e.CHM(g),e.oxw(2).data.activeStartDate=y}),e.qZA(),e.TgZ(13,"app-text-area",19),e.NdJ("valueChange",function(y){return e.CHM(g),e.oxw(2).data.description=y}),e.qZA()(),e.YNc(14,A,1,1,"p-message",20),e.TgZ(15,"div",21),e.YNc(16,L,1,0,"button",22),e._UZ(17,"button",23),e.qZA()()}if(2&p){const g=e.oxw(2);e.Q6J("disabled",g.isSubmitting),e.xp6(2),e.Q6J("validations",e.DdM(19,B))("value",g.data.name),e.xp6(1),e.Q6J("readonly",!0)("disabled","add"===g.type)("value",g.data.identifier),e.xp6(1),e.Q6J("disabled","add"===g.type)("value",g.data.connectionString),e.xp6(2),e.Q6J("value",g.data.isSimulated),e.xp6(1),e.Q6J("value",e.lcZ(8,17,g.data.updateInterval)),e.xp6(2),e.Q6J("disabled","add"===g.type)("value",g.data.lastUpdate),e.xp6(2),e.Q6J("value",g.data.isActive),e.xp6(1),e.Q6J("value",g.data.activeStartDate),e.xp6(1),e.Q6J("value",g.data.description),e.xp6(1),e.Q6J("ngIf",g.error),e.xp6(2),e.Q6J("ngIf",g.modal)}}function P(p,N){if(1&p&&(e.YNc(0,_,18,20,"app-form",5),e._UZ(1,"app-fullscreen-loader",6)),2&p){const g=e.oxw();e.Q6J("ngIf",g.data),e.xp6(1),e.Q6J("visible",g.isSubmitting)}}let O=(()=>{class p{constructor(g){this._devicesService=g,this.onSubmitSuccess=new e.vpe,this.modal=!1,this.modalVisible=!1,this._isSubmitting=!1}clear(){var g;null===(g=this._form)||void 0===g||g.clearInputs(),this.data=null,this._error=null}onSubmit(g){var C=this;return(0,o.Z)(function*(){if(g.isValid)try{C._isSubmitting=!0,C._error=null;const y=yield C.sendSubmission(C.type,C.data);C.onSubmitSuccess.emit(y)}catch(y){C.showHttpError(y)}finally{C._isSubmitting=!1}})()}sendSubmission(g,C){var y=this;return new Promise(function(){var S=(0,o.Z)(function*(z,Q){try{let H=null;switch(g){case"add":H=yield y._devicesService.addIotDevice(C);break;case"edit":H=yield y._devicesService.updateIotDevice(C.id,C);break;default:throw"[FormType] property is invalid"}z(H.body)}catch(H){Q(H.error)}});return function(z,Q){return S.apply(this,arguments)}}())}showHttpError(g){this._error="string"==typeof g.error?g.error:g.message}get isSubmitting(){return this._isSubmitting}get error(){return this._error}}return p.\u0275fac=function(g){return new(g||p)(e.Y36(t.p))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-iot-device-form"]],viewQuery:function(g,C){if(1&g&&e.Gf(n.i,5),2&g){let y;e.iGM(y=e.CRH())&&(C._form=y.first)}},inputs:{type:"type",data:"data",modal:"modal",modalVisible:"modalVisible"},outputs:{onSubmitSuccess:"onSubmitSuccess"},decls:4,vars:2,consts:[["styleClass","lg:w-8 lg:h-auto w-11 h-full",3,"header","modal","closable","visible","visibleChange",4,"ngIf"],[4,"ngIf"],["formTemplate",""],["styleClass","lg:w-8 lg:h-auto w-11 h-full",3,"header","modal","closable","visible","visibleChange"],[4,"ngTemplateOutlet"],[3,"disabled","onSubmit",4,"ngIf"],["text","Submitting...",3,"visible"],[3,"disabled","onSubmit"],["headerClass","text-xl font-semibold mb-2","contentClass","grid mb-4","header","Connection Properties"],["name","name","label","Device Name","labelClass","mb-2 font-semibold",1,"col-6",3,"validations","value","valueChange"],["name","identifier","label","Device Identifier","labelClass","mb-2 font-semibold","placeholder","Auto-Generated",1,"col-6",3,"readonly","disabled","value"],["name","connection-string","label","Connection String","labelClass","mb-2 font-semibold","placeholder","Auto-Generated",1,"col-12",3,"disabled","value","valueChange"],["headerClass","text-xl font-semibold mb-2","contentClass","grid mb-4","header","Data Properties"],["name","is-simulated","label","Is Simulated","labelClass","ml-2 font-semibold",1,"col-12",3,"value","valueChange"],["name","update-interval","label","Update Interval","labelClass","mb-2 font-semibold",1,"col-6",3,"value","valueChange"],["name","last-update","type","datetime-local","label","Last Update","labelClass","mb-2 font-semibold",1,"col-6",3,"disabled","value","valueChange"],["headerClass","text-xl font-semibold mb-2","contentClass","grid mb-4 align-items-center","header","General Properties"],["name","is-active","label","Is Active","labelClass","ml-2 font-semibold",1,"col-6",3,"value","valueChange"],["name","active-start-date","type","datetime-local","label","Active Start Date","labelClass","mb-2 font-semibold",1,"col-6",3,"value","valueChange"],["name","description","label","Description","labelClass","mb-2 font-semibold",1,"col-12",3,"value","valueChange"],["severity","error","styleClass","block mt-4 mb-2",3,"text",4,"ngIf"],["slot","footer",1,"form-actions","text-right"],["pButton","","class","p-button-text","type","button","label","Cancel","icon","pi pi-times",3,"click",4,"ngIf"],["pButton","","type","submit","label","Submit","icon","pi pi-check",1,"p-button-text"],["severity","error","styleClass","block mt-4 mb-2",3,"text"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"]],template:function(g,C){1&g&&(e.YNc(0,E,2,5,"p-dialog",0),e.YNc(1,x,2,1,"ng-container",1),e.YNc(2,P,2,2,"ng-template",null,2,e.W1O)),2&g&&(e.Q6J("ngIf",C.modal),e.xp6(1),e.Q6J("ngIf",!C.modal))},directives:[r.O5,l.V,r.tP,n.i,s.H,u.a,m.w,w.j,h.A,I.q,v.Hq,T.l],pipes:[M.i],styles:["[_nghost-%COMP%]   app-form[_ngcontent-%COMP%]{height:100%}"]}),p})()},2446:(R,a,i)=>{"use strict";i.d(a,{j:()=>v});var o=i(5461),e=i(4063),n=i(7587),t=i(9808),r=i(1424);const l=["inputContainer"],s=function(T,M){return{"ng-dirty":T,"ng-invalid":M}};function u(T,M){if(1&T){const b=n.EpF();n.TgZ(0,"label")(1,"input",7,8),n.NdJ("blur",function(){return n.CHM(b),n.oxw().validateIfDirty()})("input",function(){const x=n.CHM(b).$implicit,A=n.MAs(2);return x.onInput(A)}),n.qZA(),n.TgZ(3,"span"),n._uU(4),n.qZA()()}if(2&T){const b=M.$implicit,E=n.oxw();n.xp6(1),n.Tol(E.inputClass),n.Q6J("title",b.label)("name",E.name+"-"+b.name)("id",E.name+"-"+b.name)("required",E.required)("disabled",E.disabled)("readonly",E.readonly)("min",0)("max",b.max)("ngClass",n.WLB(12,s,E.hasErrors,E.hasErrors)),n.xp6(3),n.Oqu(b.label)}}function m(T,M){1&T&&(n.TgZ(0,"span"),n._uU(1,"*\xa0"),n.qZA())}function w(T,M){if(1&T&&(n.TgZ(0,"label",9),n.YNc(1,m,2,0,"span",10),n.TgZ(2,"span"),n._uU(3),n.qZA()()),2&T){const b=n.oxw();n.Tol(b.labelClass),n.Q6J("for",b.name),n.xp6(1),n.Q6J("ngIf",b.required),n.xp6(2),n.Oqu(b.label)}}function h(T,M){if(1&T&&(n.TgZ(0,"li",11),n._uU(1),n.qZA()),2&T){const b=M.$implicit;n.xp6(1),n.Oqu(b)}}const I=function(T){return{visible:T}};let v=(()=>{class T extends e.y{constructor(){var b,E,F;super(...arguments),this.inputs=[{label:"Hours",name:"hours",max:24,model:null===(b=this._value)||void 0===b?void 0:b.hours,onInput:x=>{this.setHours(x.value),x.value=this._value.hours.toString()}},{label:"Minutes",name:"minutes",max:59,model:null===(E=this._value)||void 0===E?void 0:E.minutes,onInput:x=>{this.setMinutes(x.value),x.value=this._value.minutes.toString()}},{label:"Seconds",name:"seconds",max:59,model:null===(F=this._value)||void 0===F?void 0:F.seconds,onInput:x=>{this.setSeconds(x.value),x.value=this._value.seconds.toString()}}]}ngOnInit(){null==this._value&&(this._value=new o.i)}ngAfterViewInit(){super.ngAfterViewInit(),this.updateNativeInputs(this._value)}setHours(b){this._value.hours!==b&&(this._value.hours=b,this.valueChange.emit(this._value))}setMinutes(b){this._value.minutes!==b&&(this._value.minutes=b,this.valueChange.emit(this._value))}setSeconds(b){this._value.seconds!==b&&(this._value.seconds=b,this.valueChange.emit(this._value))}onValueSetting(b){return b=null!=b?b:new o.i,this.updateNativeInputs(b),b}getNativeInputs(){let b=null;return null!=this._inputContainer&&(b=Array.from(this._inputContainer.nativeElement.querySelectorAll("input"))),b}updateNativeInputs(b){const E=this.getNativeInputs();null!=E&&(E[0].value=b.hours.toString(),E[1].value=b.minutes.toString(),E[2].value=b.seconds.toString())}}return T.\u0275fac=function(){let M;return function(E){return(M||(M=n.n5z(T)))(E||T)}}(),T.\u0275cmp=n.Xpm({type:T,selectors:[["app-input-time-span"]],viewQuery:function(b,E){if(1&b&&n.Gf(l,5),2&b){let F;n.iGM(F=n.CRH())&&(E._inputContainer=F.first)}},features:[n._Bn([{provide:e.y,useExisting:T}]),n.qOj],decls:7,vars:6,consts:[[1,"input-wrapper","w-full"],[1,"inputs"],["inputContainer",""],[4,"ngFor","ngForOf"],[3,"for","class",4,"ngIf"],[1,"error-list",3,"ngClass"],["class","error-message",4,"ngFor","ngForOf"],["pInputText","","type","number",3,"title","name","id","required","disabled","readonly","min","max","ngClass","blur","input"],["inputEl",""],[3,"for"],[4,"ngIf"],[1,"error-message"]],template:function(b,E){1&b&&(n.TgZ(0,"div",0)(1,"div",1,2),n.YNc(3,u,5,15,"label",3),n.qZA(),n.YNc(4,w,4,5,"label",4),n.qZA(),n.TgZ(5,"ul",5),n.YNc(6,h,2,1,"li",6),n.qZA()),2&b&&(n.xp6(3),n.Q6J("ngForOf",E.inputs),n.xp6(1),n.Q6J("ngIf",E.label),n.xp6(1),n.Q6J("ngClass",n.VKq(4,I,E.showErrors&&E.hasErrors)),n.xp6(1),n.Q6J("ngForOf",E.errors))},directives:[t.sg,r.o,t.mk,t.O5],styles:["[_nghost-%COMP%]{display:inline-flex;flex-direction:column}[_nghost-%COMP%]   div.input-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-flex;flex-direction:column-reverse}[_nghost-%COMP%]   ul.error-list[_ngcontent-%COMP%]{max-height:0px;padding:0;margin:0;font-size:.8em;overflow:hidden;transition:.16s}[_nghost-%COMP%]   ul.error-list.visible[_ngcontent-%COMP%]{max-height:50px;padding:4px;overflow:auto}[_nghost-%COMP%]   ul.error-list[_ngcontent-%COMP%]   li.error-message[_ngcontent-%COMP%]{display:block;color:#eb445a;font-weight:500}[_nghost-%COMP%]   div.inputs[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   div.inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-flow:column;flex:1;min-width:92px}[_nghost-%COMP%]   div.inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-of-type(2){margin:0 6px}[_nghost-%COMP%]   div.inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem}"]}),T})()},3654:(R,a,i)=>{"use strict";i.d(a,{$:()=>l});var o=i(7587),e=i(9808),n=i(159),t=i(845);function r(s,u){if(1&s&&(o.ynx(0),o._UZ(1,"qr-code",1),o.TgZ(2,"a",2),o._UZ(3,"button",3),o.qZA(),o.BQk()),2&s){const m=o.oxw();o.xp6(1),o.Q6J("value",m.qrValue),o.xp6(1),o.Q6J("download",m.downloadName)}}let l=(()=>{class s{constructor(m){this._elementRef=m,this.downloadName="download",this._initialized=!1}ngAfterViewInit(){this._initialized=!0,this.generateDownloadUrl()}generateDownloadUrl(){if(null!=this._qrValue){const m=this._elementRef.nativeElement,w=m.querySelector(".qr-code canvas");m.querySelector(".download-link").href=w.toDataURL()}}get qrValue(){return this._qrValue}set qrValue(m){this._qrValue=m,this._initialized&&this.generateDownloadUrl()}}return s.\u0275fac=function(m){return new(m||s)(o.Y36(o.SBq))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-qr-code-img"]],inputs:{downloadName:"downloadName",qrValue:"qrValue"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"qr-code",3,"value"],[1,"download-link",3,"download"],["pButton","","label","Download","icon","pi pi-download"]],template:function(m,w){1&m&&o.YNc(0,r,4,2,"ng-container",0),2&m&&o.Q6J("ngIf",w.qrValue)},directives:[e.O5,n.uU,t.Hq],styles:["[_nghost-%COMP%]{display:inline-flex;flex-direction:column;width:100%;align-items:center}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{margin-top:.5rem;text-decoration:none}[_nghost-%COMP%]   a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),s})()},6742:(R,a,i)=>{"use strict";i.d(a,{O:()=>t}),i(7758);var e=i(7587);let t=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({}),r})()},7758:(R,a,i)=>{"use strict";i.d(a,{i:()=>n});var o=i(5461),e=i(7587);let n=(()=>{class t{transform(l,s){let u;try{const m=o.i.parse(l);if(u=m,null!=s)switch(s){case"string":u=m.toString();break;case"full":u=m.toString(s)}}catch(m){u=null}return u}}return t.\u0275fac=function(l){return new(l||t)},t.\u0275pipe=e.Yjl({name:"timeSpan",type:t,pure:!0}),t})()},5461:(R,a,i)=>{"use strict";i.d(a,{i:()=>o});class o{constructor(n,t,r){this._hours=0,this._minutes=0,this._seconds=0,this.hours=n,this.minutes=t,this.seconds=r}static parse(n){let t=null;if(n instanceof o)t=n;else{const r=n.split(":");if(r.some(w=>Number.isNaN(w)))throw new Error(`Cannot parse a TimeSpan with given value: "${n}"`);const l=w=>null!=r[w]?Number(r[w]):0,s=l(0),u=l(1),m=l(2);t=new o(s,u,m)}return t}toString(n){let t;return t="full"===n?`${this._hours}hr, ${this._minutes}min, ${this._seconds}sec`:`${this.getValueString(this._hours)}:${this.getValueString(this._minutes)}:${this.getValueString(this._seconds)}`,t}formatValue(n){return n=Number(n),Number.isNaN(n)?0:Math.abs(n)}getValueString(n){return n>9?`${n}`:`0${n}`}get hours(){return this._hours}set hours(n){n=this.formatValue(n),this._hours=n>24?24:n}get minutes(){return this._minutes}set minutes(n){n=this.formatValue(n),this._minutes=n>59?59:n}get seconds(){return this._seconds}set seconds(n){n=this.formatValue(n),this._seconds=n>59?59:n}}},4901:R=>{"use strict";var a={single_source_shortest_paths:function(i,o,e){var n={},t={};t[o]=0;var l,s,u,m,w,I,r=a.PriorityQueue.make();for(r.push(o,0);!r.empty();)for(u in m=(l=r.pop()).cost,w=i[s=l.value]||{})w.hasOwnProperty(u)&&(I=m+w[u],(void 0===t[u]||t[u]>I)&&(t[u]=I,r.push(u,I),n[u]=s));if(void 0!==e&&void 0===t[e]){var M=["Could not find a path from ",o," to ",e,"."].join("");throw new Error(M)}return n},extract_shortest_path_from_predecessor_list:function(i,o){for(var e=[],n=o;n;)e.push(n),n=i[n];return e.reverse(),e},find_path:function(i,o,e){var n=a.single_source_shortest_paths(i,o,e);return a.extract_shortest_path_from_predecessor_list(n,e)},PriorityQueue:{make:function(i){var n,o=a.PriorityQueue,e={};for(n in i=i||{},o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e.queue=[],e.sorter=i.sorter||o.default_sorter,e},default_sorter:function(i,o){return i.cost-o.cost},push:function(i,o){this.queue.push({value:i,cost:o}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};R.exports=a},8419:R=>{"use strict";R.exports=function(i){for(var o=[],e=i.length,n=0;n<e;n++){var t=i.charCodeAt(n);if(t>=55296&&t<=56319&&e>n+1){var r=i.charCodeAt(n+1);r>=56320&&r<=57343&&(t=1024*(t-55296)+r-56320+65536,n+=1)}t<128?o.push(t):t<2048?(o.push(t>>6|192),o.push(63&t|128)):t<55296||t>=57344&&t<65536?(o.push(t>>12|224),o.push(t>>6&63|128),o.push(63&t|128)):t>=65536&&t<=1114111?(o.push(t>>18|240),o.push(t>>12&63|128),o.push(t>>6&63|128),o.push(63&t|128)):o.push(239,191,189)}return new Uint8Array(o).buffer}},3259:(R,a,i)=>{const o=i(8695),e=i(1465),n=i(3210),t=i(2334);function r(l,s,u,m,w){const h=[].slice.call(arguments,1),I=h.length,v="function"==typeof h[I-1];if(!v&&!o())throw new Error("Callback required as last argument");if(!v){if(I<1)throw new Error("Too few arguments provided");return 1===I?(u=s,s=m=void 0):2===I&&!s.getContext&&(m=u,u=s,s=void 0),new Promise(function(T,M){try{const b=e.create(u,m);T(l(b,s,m))}catch(b){M(b)}})}if(I<2)throw new Error("Too few arguments provided");2===I?(w=u,u=s,s=m=void 0):3===I&&(s.getContext&&void 0===w?(w=m,m=void 0):(w=m,m=u,u=s,s=void 0));try{const T=e.create(u,m);w(null,l(T,s,m))}catch(T){w(T)}}a.create=e.create,a.toCanvas=r.bind(null,n.render),a.toDataURL=r.bind(null,n.renderToDataURL),a.toString=r.bind(null,function(l,s,u){return t.render(l,u)})},8695:R=>{R.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6221:(R,a,i)=>{const o=i(4792).getSymbolSize;a.getRowColCoords=function(n){if(1===n)return[];const t=Math.floor(n/7)+2,r=o(n),l=145===r?26:2*Math.ceil((r-13)/(2*t-2)),s=[r-7];for(let u=1;u<t-1;u++)s[u]=s[u-1]-l;return s.push(6),s.reverse()},a.getPositions=function(n){const t=[],r=a.getRowColCoords(n),l=r.length;for(let s=0;s<l;s++)for(let u=0;u<l;u++)0===s&&0===u||0===s&&u===l-1||s===l-1&&0===u||t.push([r[s],r[u]]);return t}},2424:(R,a,i)=>{const o=i(4016),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(t){this.mode=o.ALPHANUMERIC,this.data=t}n.getBitsLength=function(r){return 11*Math.floor(r/2)+r%2*6},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let l;for(l=0;l+2<=this.data.length;l+=2){let s=45*e.indexOf(this.data[l]);s+=e.indexOf(this.data[l+1]),r.put(s,11)}this.data.length%2&&r.put(e.indexOf(this.data[l]),6)},R.exports=n},2118:R=>{function a(){this.buffer=[],this.length=0}a.prototype={get:function(i){const o=Math.floor(i/8);return 1==(this.buffer[o]>>>7-i%8&1)},put:function(i,o){for(let e=0;e<o;e++)this.putBit(1==(i>>>o-e-1&1))},getLengthInBits:function(){return this.length},putBit:function(i){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),i&&(this.buffer[o]|=128>>>this.length%8),this.length++}},R.exports=a},4425:R=>{function a(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}a.prototype.set=function(i,o,e,n){const t=i*this.size+o;this.data[t]=e,n&&(this.reservedBit[t]=!0)},a.prototype.get=function(i,o){return this.data[i*this.size+o]},a.prototype.xor=function(i,o,e){this.data[i*this.size+o]^=e},a.prototype.isReserved=function(i,o){return this.reservedBit[i*this.size+o]},R.exports=a},5663:(R,a,i)=>{const o=i(8419),e=i(4016);function n(t){this.mode=e.BYTE,this.data=new Uint8Array(o(t))}n.getBitsLength=function(r){return 8*r},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){for(let r=0,l=this.data.length;r<l;r++)t.put(this.data[r],8)},R.exports=n},4655:(R,a,i)=>{const o=i(2259),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];a.getBlocksCount=function(r,l){switch(l){case o.L:return e[4*(r-1)+0];case o.M:return e[4*(r-1)+1];case o.Q:return e[4*(r-1)+2];case o.H:return e[4*(r-1)+3];default:return}},a.getTotalCodewordsCount=function(r,l){switch(l){case o.L:return n[4*(r-1)+0];case o.M:return n[4*(r-1)+1];case o.Q:return n[4*(r-1)+2];case o.H:return n[4*(r-1)+3];default:return}}},2259:(R,a)=>{a.L={bit:1},a.M={bit:0},a.Q={bit:3},a.H={bit:2},a.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},a.from=function(e,n){if(a.isValid(e))return e;try{return function i(o){if("string"!=typeof o)throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return a.L;case"m":case"medium":return a.M;case"q":case"quartile":return a.Q;case"h":case"high":return a.H;default:throw new Error("Unknown EC Level: "+o)}}(e)}catch(t){return n}}},3114:(R,a,i)=>{const o=i(4792).getSymbolSize;a.getPositions=function(t){const r=o(t);return[[0,0],[r-7,0],[0,r-7]]}},7078:(R,a,i)=>{const o=i(4792),t=o.getBCHDigit(1335);a.getEncodedBits=function(l,s){const u=l.bit<<3|s;let m=u<<10;for(;o.getBCHDigit(m)-t>=0;)m^=1335<<o.getBCHDigit(m)-t;return 21522^(u<<10|m)}},5339:(R,a)=>{const i=new Uint8Array(512),o=new Uint8Array(256);(function(){let n=1;for(let t=0;t<255;t++)i[t]=n,o[n]=t,n<<=1,256&n&&(n^=285);for(let t=255;t<512;t++)i[t]=i[t-255]})(),a.log=function(n){if(n<1)throw new Error("log("+n+")");return o[n]},a.exp=function(n){return i[n]},a.mul=function(n,t){return 0===n||0===t?0:i[o[n]+o[t]]}},449:(R,a,i)=>{const o=i(4016),e=i(4792);function n(t){this.mode=o.KANJI,this.data=t}n.getBitsLength=function(r){return 13*r},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){let r;for(r=0;r<this.data.length;r++){let l=e.toSJIS(this.data[r]);if(l>=33088&&l<=40956)l-=33088;else{if(!(l>=57408&&l<=60351))throw new Error("Invalid SJIS character: "+this.data[r]+"\nMake sure your charset is UTF-8");l-=49472}l=192*(l>>>8&255)+(255&l),t.put(l,13)}},R.exports=n},3667:(R,a)=>{a.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function o(e,n,t){switch(e){case a.Patterns.PATTERN000:return(n+t)%2==0;case a.Patterns.PATTERN001:return n%2==0;case a.Patterns.PATTERN010:return t%3==0;case a.Patterns.PATTERN011:return(n+t)%3==0;case a.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2==0;case a.Patterns.PATTERN101:return n*t%2+n*t%3==0;case a.Patterns.PATTERN110:return(n*t%2+n*t%3)%2==0;case a.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}a.isValid=function(n){return null!=n&&""!==n&&!isNaN(n)&&n>=0&&n<=7},a.from=function(n){return a.isValid(n)?parseInt(n,10):void 0},a.getPenaltyN1=function(n){const t=n.size;let r=0,l=0,s=0,u=null,m=null;for(let w=0;w<t;w++){l=s=0,u=m=null;for(let h=0;h<t;h++){let I=n.get(w,h);I===u?l++:(l>=5&&(r+=l-5+3),u=I,l=1),I=n.get(h,w),I===m?s++:(s>=5&&(r+=s-5+3),m=I,s=1)}l>=5&&(r+=l-5+3),s>=5&&(r+=s-5+3)}return r},a.getPenaltyN2=function(n){const t=n.size;let r=0;for(let l=0;l<t-1;l++)for(let s=0;s<t-1;s++){const u=n.get(l,s)+n.get(l,s+1)+n.get(l+1,s)+n.get(l+1,s+1);(4===u||0===u)&&r++}return 3*r},a.getPenaltyN3=function(n){const t=n.size;let r=0,l=0,s=0;for(let u=0;u<t;u++){l=s=0;for(let m=0;m<t;m++)l=l<<1&2047|n.get(u,m),m>=10&&(1488===l||93===l)&&r++,s=s<<1&2047|n.get(m,u),m>=10&&(1488===s||93===s)&&r++}return 40*r},a.getPenaltyN4=function(n){let t=0;const r=n.data.length;for(let s=0;s<r;s++)t+=n.data[s];return 10*Math.abs(Math.ceil(100*t/r/5)-10)},a.applyMask=function(n,t){const r=t.size;for(let l=0;l<r;l++)for(let s=0;s<r;s++)t.isReserved(s,l)||t.xor(s,l,o(n,s,l))},a.getBestMask=function(n,t){const r=Object.keys(a.Patterns).length;let l=0,s=1/0;for(let u=0;u<r;u++){t(u),a.applyMask(u,n);const m=a.getPenaltyN1(n)+a.getPenaltyN2(n)+a.getPenaltyN3(n)+a.getPenaltyN4(n);a.applyMask(u,n),m<s&&(s=m,l=u)}return l}},4016:(R,a,i)=>{const o=i(4406),e=i(2699);a.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},a.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},a.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},a.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},a.MIXED={bit:-1},a.getCharCountIndicator=function(r,l){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!o.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?r.ccBits[0]:l<27?r.ccBits[1]:r.ccBits[2]},a.getBestModeForData=function(r){return e.testNumeric(r)?a.NUMERIC:e.testAlphanumeric(r)?a.ALPHANUMERIC:e.testKanji(r)?a.KANJI:a.BYTE},a.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},a.isValid=function(r){return r&&r.bit&&r.ccBits},a.from=function(r,l){if(a.isValid(r))return r;try{return function n(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return a.NUMERIC;case"alphanumeric":return a.ALPHANUMERIC;case"kanji":return a.KANJI;case"byte":return a.BYTE;default:throw new Error("Unknown mode: "+t)}}(r)}catch(s){return l}}},7783:(R,a,i)=>{const o=i(4016);function e(n){this.mode=o.NUMERIC,this.data=n.toString()}e.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){let r,l,s;for(r=0;r+3<=this.data.length;r+=3)l=this.data.substr(r,3),s=parseInt(l,10),t.put(s,10);const u=this.data.length-r;u>0&&(l=this.data.substr(r),s=parseInt(l,10),t.put(s,3*u+1))},R.exports=e},1106:(R,a,i)=>{const o=i(5339);a.mul=function(n,t){const r=new Uint8Array(n.length+t.length-1);for(let l=0;l<n.length;l++)for(let s=0;s<t.length;s++)r[l+s]^=o.mul(n[l],t[s]);return r},a.mod=function(n,t){let r=new Uint8Array(n);for(;r.length-t.length>=0;){const l=r[0];for(let u=0;u<t.length;u++)r[u]^=o.mul(t[u],l);let s=0;for(;s<r.length&&0===r[s];)s++;r=r.slice(s)}return r},a.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let r=0;r<n;r++)t=a.mul(t,new Uint8Array([1,o.exp(r)]));return t}},1465:(R,a,i)=>{const o=i(4792),e=i(2259),n=i(2118),t=i(4425),r=i(6221),l=i(3114),s=i(3667),u=i(4655),m=i(2636),w=i(2088),h=i(7078),I=i(4016),v=i(2033);function F(_,P,O){const p=_.size,N=h.getEncodedBits(P,O);let g,C;for(g=0;g<15;g++)C=1==(N>>g&1),_.set(g<6?g:g<8?g+1:p-15+g,8,C,!0),_.set(8,g<8?p-g-1:g<9?15-g-1+1:15-g-1,C,!0);_.set(p-8,8,1,!0)}function B(_,P,O,p){let N;if(Array.isArray(_))N=v.fromArray(_);else{if("string"!=typeof _)throw new Error("Invalid data");{let z=P;if(!z){const Q=v.rawSplit(_);z=w.getBestVersionForData(Q,O)}N=v.fromString(_,z||40)}}const g=w.getBestVersionForData(N,O);if(!g)throw new Error("The amount of data is too big to be stored in a QR Code");if(P){if(P<g)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+g+".\n")}else P=g;const C=function A(_,P,O){const p=new n;O.forEach(function(S){p.put(S.mode.bit,4),p.put(S.getLength(),I.getCharCountIndicator(S.mode,_)),S.write(p)});const C=8*(o.getSymbolTotalCodewords(_)-u.getTotalCodewordsCount(_,P));for(p.getLengthInBits()+4<=C&&p.put(0,4);p.getLengthInBits()%8!=0;)p.putBit(0);const y=(C-p.getLengthInBits())/8;for(let S=0;S<y;S++)p.put(S%2?17:236,8);return function L(_,P,O){const p=o.getSymbolTotalCodewords(P),g=p-u.getTotalCodewordsCount(P,O),C=u.getBlocksCount(P,O),S=C-p%C,z=Math.floor(p/C),Q=Math.floor(g/C),H=Q+1,G=z-Q,U=new m(G);let f=0;const c=new Array(C),d=new Array(C);let D=0;const Z=new Uint8Array(_.buffer);for(let Y=0;Y<C;Y++){const k=Y<S?Q:H;c[Y]=Z.slice(f,f+k),d[Y]=U.encode(c[Y]),f+=k,D=Math.max(D,k)}const J=new Uint8Array(p);let V,K,W=0;for(V=0;V<D;V++)for(K=0;K<C;K++)V<c[K].length&&(J[W++]=c[K][V]);for(V=0;V<G;V++)for(K=0;K<C;K++)J[W++]=d[K][V];return J}(p,_,P)}(P,O,N),y=o.getSymbolSize(P),S=new t(y);return function T(_,P){const O=_.size,p=l.getPositions(P);for(let N=0;N<p.length;N++){const g=p[N][0],C=p[N][1];for(let y=-1;y<=7;y++)if(!(g+y<=-1||O<=g+y))for(let S=-1;S<=7;S++)C+S<=-1||O<=C+S||_.set(g+y,C+S,y>=0&&y<=6&&(0===S||6===S)||S>=0&&S<=6&&(0===y||6===y)||y>=2&&y<=4&&S>=2&&S<=4,!0)}}(S,P),function M(_){const P=_.size;for(let O=8;O<P-8;O++){const p=O%2==0;_.set(O,6,p,!0),_.set(6,O,p,!0)}}(S),function b(_,P){const O=r.getPositions(P);for(let p=0;p<O.length;p++){const N=O[p][0],g=O[p][1];for(let C=-2;C<=2;C++)for(let y=-2;y<=2;y++)_.set(N+C,g+y,-2===C||2===C||-2===y||2===y||0===C&&0===y,!0)}}(S,P),F(S,O,0),P>=7&&function E(_,P){const O=_.size,p=w.getEncodedBits(P);let N,g,C;for(let y=0;y<18;y++)N=Math.floor(y/3),g=y%3+O-8-3,C=1==(p>>y&1),_.set(N,g,C,!0),_.set(g,N,C,!0)}(S,P),function x(_,P){const O=_.size;let p=-1,N=O-1,g=7,C=0;for(let y=O-1;y>0;y-=2)for(6===y&&y--;;){for(let S=0;S<2;S++)if(!_.isReserved(N,y-S)){let z=!1;C<P.length&&(z=1==(P[C]>>>g&1)),_.set(N,y-S,z),g--,-1===g&&(C++,g=7)}if(N+=p,N<0||O<=N){N-=p,p=-p;break}}}(S,C),isNaN(p)&&(p=s.getBestMask(S,F.bind(null,S,O))),s.applyMask(p,S),F(S,O,p),{modules:S,version:P,errorCorrectionLevel:O,maskPattern:p,segments:N}}a.create=function(P,O){if(void 0===P||""===P)throw new Error("No input text");let N,g,p=e.M;return void 0!==O&&(p=e.from(O.errorCorrectionLevel,e.M),N=w.from(O.version),g=s.from(O.maskPattern),O.toSJISFunc&&o.setToSJISFunction(O.toSJISFunc)),B(P,N,p,g)}},2636:(R,a,i)=>{const o=i(1106);function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}e.prototype.initialize=function(t){this.degree=t,this.genPoly=o.generateECPolynomial(this.degree)},e.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const l=o.mod(r,this.genPoly),s=this.degree-l.length;if(s>0){const u=new Uint8Array(this.degree);return u.set(l,s),u}return l},R.exports=e},2699:(R,a)=>{const i="[0-9]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+")(?:.|[\r\n]))+";a.KANJI=new RegExp(e,"g"),a.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),a.BYTE=new RegExp(n,"g"),a.NUMERIC=new RegExp(i,"g"),a.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const t=new RegExp("^"+e+"$"),r=new RegExp("^"+i+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");a.testKanji=function(u){return t.test(u)},a.testNumeric=function(u){return r.test(u)},a.testAlphanumeric=function(u){return l.test(u)}},2033:(R,a,i)=>{const o=i(4016),e=i(7783),n=i(2424),t=i(5663),r=i(449),l=i(2699),s=i(4792),u=i(4901);function m(E){return unescape(encodeURIComponent(E)).length}function w(E,F,x){const A=[];let L;for(;null!==(L=E.exec(x));)A.push({data:L[0],index:L.index,mode:F,length:L[0].length});return A}function h(E){const F=w(l.NUMERIC,o.NUMERIC,E),x=w(l.ALPHANUMERIC,o.ALPHANUMERIC,E);let A,L;return s.isKanjiModeEnabled()?(A=w(l.BYTE,o.BYTE,E),L=w(l.KANJI,o.KANJI,E)):(A=w(l.BYTE_KANJI,o.BYTE,E),L=[]),F.concat(x,A,L).sort(function(_,P){return _.index-P.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function I(E,F){switch(F){case o.NUMERIC:return e.getBitsLength(E);case o.ALPHANUMERIC:return n.getBitsLength(E);case o.KANJI:return r.getBitsLength(E);case o.BYTE:return t.getBitsLength(E)}}function b(E,F){let x;const A=o.getBestModeForData(E);if(x=o.from(F,A),x!==o.BYTE&&x.bit<A.bit)throw new Error('"'+E+'" cannot be encoded with mode '+o.toString(x)+".\n Suggested mode is: "+o.toString(A));switch(x===o.KANJI&&!s.isKanjiModeEnabled()&&(x=o.BYTE),x){case o.NUMERIC:return new e(E);case o.ALPHANUMERIC:return new n(E);case o.KANJI:return new r(E);case o.BYTE:return new t(E)}}a.fromArray=function(F){return F.reduce(function(x,A){return"string"==typeof A?x.push(b(A,null)):A.data&&x.push(b(A.data,A.mode)),x},[])},a.fromString=function(F,x){const L=function T(E){const F=[];for(let x=0;x<E.length;x++){const A=E[x];switch(A.mode){case o.NUMERIC:F.push([A,{data:A.data,mode:o.ALPHANUMERIC,length:A.length},{data:A.data,mode:o.BYTE,length:A.length}]);break;case o.ALPHANUMERIC:F.push([A,{data:A.data,mode:o.BYTE,length:A.length}]);break;case o.KANJI:F.push([A,{data:A.data,mode:o.BYTE,length:m(A.data)}]);break;case o.BYTE:F.push([{data:A.data,mode:o.BYTE,length:m(A.data)}])}}return F}(h(F,s.isKanjiModeEnabled())),B=function M(E,F){const x={},A={start:{}};let L=["start"];for(let B=0;B<E.length;B++){const _=E[B],P=[];for(let O=0;O<_.length;O++){const p=_[O],N=""+B+O;P.push(N),x[N]={node:p,lastCount:0},A[N]={};for(let g=0;g<L.length;g++){const C=L[g];x[C]&&x[C].node.mode===p.mode?(A[C][N]=I(x[C].lastCount+p.length,p.mode)-I(x[C].lastCount,p.mode),x[C].lastCount+=p.length):(x[C]&&(x[C].lastCount=p.length),A[C][N]=I(p.length,p.mode)+4+o.getCharCountIndicator(p.mode,F))}}L=P}for(let B=0;B<L.length;B++)A[L[B]].end=0;return{map:A,table:x}}(L,x),_=u.find_path(B.map,"start","end"),P=[];for(let O=1;O<_.length-1;O++)P.push(B.table[_[O]].node);return a.fromArray(function v(E){return E.reduce(function(F,x){const A=F.length-1>=0?F[F.length-1]:null;return A&&A.mode===x.mode?(F[F.length-1].data+=x.data,F):(F.push(x),F)},[])}(P))},a.rawSplit=function(F){return a.fromArray(h(F,s.isKanjiModeEnabled()))}},4792:(R,a)=>{let i;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];a.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return 4*n+17},a.getSymbolTotalCodewords=function(n){return o[n]},a.getBCHDigit=function(e){let n=0;for(;0!==e;)n++,e>>>=1;return n},a.setToSJISFunction=function(n){if("function"!=typeof n)throw new Error('"toSJISFunc" is not a valid function.');i=n},a.isKanjiModeEnabled=function(){return void 0!==i},a.toSJIS=function(n){return i(n)}},4406:(R,a)=>{a.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40}},2088:(R,a,i)=>{const o=i(4792),e=i(4655),n=i(2259),t=i(4016),r=i(4406),s=o.getBCHDigit(7973);function m(I,v){return t.getCharCountIndicator(I,v)+4}function w(I,v){let T=0;return I.forEach(function(M){T+=m(M.mode,v)+M.getBitsLength()}),T}a.from=function(v,T){return r.isValid(v)?parseInt(v,10):T},a.getCapacity=function(v,T,M){if(!r.isValid(v))throw new Error("Invalid QR Code version");void 0===M&&(M=t.BYTE);const F=8*(o.getSymbolTotalCodewords(v)-e.getTotalCodewordsCount(v,T));if(M===t.MIXED)return F;const x=F-m(M,v);switch(M){case t.NUMERIC:return Math.floor(x/10*3);case t.ALPHANUMERIC:return Math.floor(x/11*2);case t.KANJI:return Math.floor(x/13);default:return Math.floor(x/8)}},a.getBestVersionForData=function(v,T){let M;const b=n.from(T,n.M);if(Array.isArray(v)){if(v.length>1)return function h(I,v){for(let T=1;T<=40;T++)if(w(I,T)<=a.getCapacity(T,v,t.MIXED))return T}(v,b);if(0===v.length)return 1;M=v[0]}else M=v;return function u(I,v,T){for(let M=1;M<=40;M++)if(v<=a.getCapacity(M,T,I))return M}(M.mode,M.getLength(),b)},a.getEncodedBits=function(v){if(!r.isValid(v)||v<7)throw new Error("Invalid QR Code version");let T=v<<12;for(;o.getBCHDigit(T)-s>=0;)T^=7973<<o.getBCHDigit(T)-s;return v<<12|T}},3210:(R,a,i)=>{const o=i(6355);a.render=function(r,l,s){let u=s,m=l;void 0===u&&(!l||!l.getContext)&&(u=l,l=void 0),l||(m=function n(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),u=o.getOptions(u);const w=o.getImageWidth(r.modules.size,u),h=m.getContext("2d"),I=h.createImageData(w,w);return o.qrToImageData(I.data,r,u),function e(t,r,l){t.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=l,r.width=l,r.style.height=l+"px",r.style.width=l+"px"}(h,m,w),h.putImageData(I,0,0),m},a.renderToDataURL=function(r,l,s){let u=s;return void 0===u&&(!l||!l.getContext)&&(u=l,l=void 0),u||(u={}),a.render(r,l,u).toDataURL(u.type||"image/png",(u.rendererOpts||{}).quality)}},2334:(R,a,i)=>{const o=i(6355);function e(r,l){const s=r.a/255,u=l+'="'+r.hex+'"';return s<1?u+" "+l+'-opacity="'+s.toFixed(2).slice(1)+'"':u}function n(r,l,s){let u=r+l;return void 0!==s&&(u+=" "+s),u}a.render=function(l,s,u){const m=o.getOptions(s),w=l.modules.size,h=l.modules.data,I=w+2*m.margin,v=m.color.light.a?"<path "+e(m.color.light,"fill")+' d="M0 0h'+I+"v"+I+'H0z"/>':"",T="<path "+e(m.color.dark,"stroke")+' d="'+function t(r,l,s){let u="",m=0,w=!1,h=0;for(let I=0;I<r.length;I++){const v=Math.floor(I%l),T=Math.floor(I/l);!v&&!w&&(w=!0),r[I]?(h++,I>0&&v>0&&r[I-1]||(u+=w?n("M",v+s,.5+T+s):n("m",m,0),m=0,w=!1),v+1<l&&r[I+1]||(u+=n("h",h),h=0)):m++}return u}(h,w,m.margin)+'"/>',E='<svg xmlns="http://www.w3.org/2000/svg" '+(m.width?'width="'+m.width+'" height="'+m.width+'" ':"")+'viewBox="0 0 '+I+" "+I+'" shape-rendering="crispEdges">'+v+T+"</svg>\n";return"function"==typeof u&&u(null,E),E}},6355:(R,a)=>{function i(o){if("number"==typeof o&&(o=o.toString()),"string"!=typeof o)throw new Error("Color should be defined as hex string");let e=o.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+o);(3===e.length||4===e.length)&&(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}a.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=e.width&&e.width>=21?e.width:void 0;return{width:t,scale:t?4:e.scale||4,margin:null==e.margin||e.margin<0?4:e.margin,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},a.getScale=function(e,n){return n.width&&n.width>=e+2*n.margin?n.width/(e+2*n.margin):n.scale},a.getImageWidth=function(e,n){const t=a.getScale(e,n);return Math.floor((e+2*n.margin)*t)},a.qrToImageData=function(e,n,t){const r=n.modules.size,l=n.modules.data,s=a.getScale(r,t),u=Math.floor((r+2*t.margin)*s),m=t.margin*s,w=[t.color.light,t.color.dark];for(let h=0;h<u;h++)for(let I=0;I<u;I++){let v=4*(h*u+I),T=t.color.light;h>=m&&I>=m&&h<u-m&&I<u-m&&(T=w[l[Math.floor((h-m)/s)*r+Math.floor((I-m)/s)]?1:0]),e[v++]=T.r,e[v++]=T.g,e[v++]=T.b,e[v]=T.a}}},159:(R,a,i)=>{"use strict";i.d(a,{uU:()=>m,OF:()=>w});var o=i(7587),e=i(9808),n=i(655),t=i(3259);function r(h,I){if(1&h&&o._UZ(0,"canvas",1),2&h){const v=o.oxw();o.Q6J("qrCode",v.value)("qrCodeErrorCorrectionLevel",v.errorCorrectionLevel)("qrCodeCenterImageSrc",v.centerImageSrc)("qrCodeCenterImageWidth",v.centerImageSize)("qrCodeCenterImageHeight",v.centerImageSize)("qrCodeMargin",v.margin)("width",v.size)("height",v.size)("darkColor",v.darkColor)("lightColor",v.lightColor)}}const l=/^#(?:[0-9a-fA-F]{3,4}){1,2}$/;let s=(()=>{class h{constructor(v){this.viewContainerRef=v,this.errorCorrectionLevel=h.DEFAULT_ERROR_CORRECTION_LEVEL,this.darkColor="#000000FF",this.lightColor="#FFFFFFFF",this.margin=16}ngOnChanges(){var v,T;return(0,n.mG)(this,void 0,void 0,function*(){if(!this.value)return;this.version&&this.version>40?(console.warn("[qrCode] max version is 40, clamping"),this.version=40):this.version&&this.version<1?(console.warn("[qrCode] min version is 1, clamping"),this.version=1):void 0!==this.version&&isNaN(this.version)&&(console.warn("[qrCode] version should be set to a number, defaulting to auto"),this.version=void 0);const M=this.viewContainerRef.element.nativeElement;if(!M)return;const b=M.getContext("2d");b&&b.clearRect(0,0,b.canvas.width,b.canvas.height);const E=null!==(v=this.errorCorrectionLevel)&&void 0!==v?v:h.DEFAULT_ERROR_CORRECTION_LEVEL,F=l.test(this.darkColor)?this.darkColor:void 0,x=l.test(this.lightColor)?this.lightColor:void 0;(0,o.X6Q)()&&(!F&&this.darkColor&&console.error("[ng-qrcode] darkColor set to invalid value, must be RGBA hex color string, eg: #3050A1FF"),!x&&this.lightColor&&console.error("[ng-qrcode] lightColor set to invalid value, must be RGBA hex color string, eg: #3050A130")),yield t.toCanvas(M,this.value,{version:this.version,errorCorrectionLevel:E,width:this.width,margin:this.margin,color:{dark:F,light:x}});const A=this.centerImageSrc,L=u(this.centerImageWidth,h.DEFAULT_CENTER_IMAGE_SIZE),B=u(this.centerImageHeight,h.DEFAULT_CENTER_IMAGE_SIZE);if(A&&b){this.centerImage||(this.centerImage=new Image(L,B)),A!==(null===(T=this.centerImage)||void 0===T?void 0:T.src)&&(this.centerImage.src=A),L!==this.centerImage.width&&(this.centerImage.width=L),B!==this.centerImage.height&&(this.centerImage.height=B);const _=this.centerImage;_.onload=()=>{b.drawImage(_,M.width/2-L/2,M.height/2-B/2,L,B)}}})}}return h.DEFAULT_ERROR_CORRECTION_LEVEL="M",h.DEFAULT_CENTER_IMAGE_SIZE=40,h.\u0275fac=function(v){return new(v||h)(o.Y36(o.s_b))},h.\u0275dir=o.lG2({type:h,selectors:[["canvas","qrCode",""]],inputs:{value:["qrCode","value"],version:["qrCodeVersion","version"],errorCorrectionLevel:["qrCodeErrorCorrectionLevel","errorCorrectionLevel"],width:"width",height:"height",darkColor:"darkColor",lightColor:"lightColor",centerImageSrc:["qrCodeCenterImageSrc","centerImageSrc"],centerImageWidth:["qrCodeCenterImageWidth","centerImageWidth"],centerImageHeight:["qrCodeCenterImageHeight","centerImageHeight"],margin:["qrCodeMargin","margin"]},features:[o.TTD]}),h})();function u(h,I){return void 0===h||""===h?I:"string"==typeof h?parseInt(h,10):h}let m=(()=>{class h{}return h.\u0275fac=function(v){return new(v||h)},h.\u0275cmp=o.Xpm({type:h,selectors:[["qr-code"]],inputs:{value:"value",size:"size",darkColor:"darkColor",lightColor:"lightColor",errorCorrectionLevel:"errorCorrectionLevel",centerImageSrc:"centerImageSrc",centerImageSize:"centerImageSize",margin:"margin"},decls:1,vars:1,consts:[[3,"qrCode","qrCodeErrorCorrectionLevel","qrCodeCenterImageSrc","qrCodeCenterImageWidth","qrCodeCenterImageHeight","qrCodeMargin","width","height","darkColor","lightColor",4,"ngIf"],[3,"qrCode","qrCodeErrorCorrectionLevel","qrCodeCenterImageSrc","qrCodeCenterImageWidth","qrCodeCenterImageHeight","qrCodeMargin","width","height","darkColor","lightColor"]],template:function(v,T){1&v&&o.YNc(0,r,1,10,"canvas",0),2&v&&o.Q6J("ngIf",T.value)},directives:[e.O5,s],encapsulation:2}),h})(),w=(()=>{class h{}return h.\u0275fac=function(v){return new(v||h)},h.\u0275mod=o.oAB({type:h}),h.\u0275inj=o.cJS({imports:[[e.ez]]}),h})()}}]);