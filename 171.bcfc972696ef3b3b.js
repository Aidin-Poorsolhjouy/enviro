"use strict";(self.webpackChunkEVC_UI_Web_Admin=self.webpackChunkEVC_UI_Web_Admin||[]).push([[171],{4171:(T,m,t)=>{t.r(m),t.d(m,{LoginModule:()=>I});var u=t(9808),a=t(2382),p=t(845),f=t(7665),d=t(1208),c=t(3724),g=t(6198),C=t(5861),L=t(7661),h=t(8655),b=t(8735),n=t(7587),y=t(7093),M=t(4844);const v=function(){return{required:!0}},J=function(i){return{visible:i}},S=[{path:"",component:(()=>{class i{constructor(e,o,s){this._authService=e,this._loginService=o,this._router=s,this.email="",this.password="",this.remember=!1,this._isLoggingIn=!1}onSubmit(){var e=this;return(0,C.Z)(function*(){if(e.isFormValid)try{e._isLoggingIn=!0,e._error=null;const o={apiKey:b.N.api.key,email:e.email,password:e.password},s=yield e._authService.login(o);yield e._loginService.loginWithLoginResponse(s.body,e.remember),e.onLoginSuccess()}catch(o){e.password="",e.showError(o)}finally{e._isLoggingIn=!1}})()}onLoginSuccess(){this._router.navigateByUrl(L.qD.root)}showError(e){var o;const s=null!==(o=e.error.message)&&void 0!==o?o:e.message;this._error=s}get isFormValid(){let e=!0;return this._formInputs.forEach(o=>{o.validate(),o.hasErrors&&(e=!1)}),e}get isLoggingIn(){return this._isLoggingIn}get error(){return this._error}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(y.e),n.Y36(M.r),n.Y36(g.F0))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-login"]],viewQuery:function(e,o){if(1&e&&n.Gf(h.a,5),2&e){let s;n.iGM(s=n.CRH())&&(o._formInputs=s)}},decls:9,vars:14,consts:[[3,"ngSubmit"],["type","email","name","email","label","Email","labelClass","font-medium mb-2","icon","pi pi-envelope",1,"block","mb-4",3,"validations","value","valueChange"],["type","password","name","password","label","Password","labelClass","font-medium mb-2","icon","pi pi-lock",1,"block","mb-4",3,"validations","value","valueChange"],[1,"inline-block","mb-4","cursor-pointer"],["name","remember-me","styleClass","mr-2",3,"binary","ngModel","ngModelChange"],[1,"font-medium"],["severity","error","styleClass","block mt-2 mb-3",3,"text","ngClass"],["pButton","","type","submit","icon","pi pi-sign-in",1,"w-full","mt-2",3,"label","loading"]],template:function(e,o){1&e&&(n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return o.onSubmit()}),n.TgZ(1,"app-input",1),n.NdJ("valueChange",function(l){return o.email=l}),n.qZA(),n.TgZ(2,"app-input",2),n.NdJ("valueChange",function(l){return o.password=l}),n.qZA(),n.TgZ(3,"label",3)(4,"p-checkbox",4),n.NdJ("ngModelChange",function(l){return o.remember=l}),n.qZA(),n.TgZ(5,"span",5),n._uU(6,"Remember me"),n.qZA()(),n._UZ(7,"p-message",6)(8,"button",7),n.qZA()),2&e&&(n.xp6(1),n.Q6J("validations",n.DdM(10,v))("value",o.email),n.xp6(1),n.Q6J("validations",n.DdM(11,v))("value",o.password),n.xp6(2),n.Q6J("binary",!0)("ngModel",o.remember),n.xp6(3),n.Q6J("text",o.error)("ngClass",n.VKq(12,J,null!=o.error)),n.xp6(1),n.Q6J("label",o.isLoggingIn?"Logging in...":"Login")("loading",o.isLoggingIn))},directives:[a._Y,a.JL,a.F,h.a,d.XZ,a.JJ,a.On,c.q,u.mk,p.Hq],styles:["[_nghost-%COMP%]   p-message[_ngcontent-%COMP%]{display:block;overflow:hidden;max-height:0;transition:.16s}[_nghost-%COMP%]   p-message.visible[_ngcontent-%COMP%]{max-height:64px}"]}),i})()}];let Z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[g.Bz.forChild(S)],g.Bz]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[u.ez,a.u5,Z,p.hJ,f.g,d.nD,c.O]]}),i})()}}]);